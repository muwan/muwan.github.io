{"meta":{"title":"èŠéº»å¼€æº","subtitle":"å¯¹å¤§æµ·æƒ…æœ‰ç‹¬é’Ÿå´åˆæ€€æœ‰æ•¬æ„ï¼Œå¾ˆæ‡’çš„ä¸€ä¸ªç†ç§‘ç”·ã€‚","description":"çƒ­çˆ±æ—…è¡Œæƒ³è¦æ¢ç´¢ä¸–ç•Œï¼Œå¯æƒœå…œé‡Œæ²¡æœ‰é’±ã€‚ç›®å‰æ˜¯ä¸€æšiOSå¼€å‘è€…ï¼Œ414457229æ˜¯æˆ‘å»ºç«‹çš„QQç¾¤ï¼Œç›®å‰æœ‰4äººäº†ï¼Œæ¬¢è¿åŠ å…¥ã€‚","author":"muwan","url":"http://www.zhimakaiyuan.com"},"pages":[{"title":"","date":"2016-12-14T03:39:11.000Z","updated":"2016-12-14T02:49:53.000Z","comments":false,"path":"tags/index.html","permalink":"http://www.zhimakaiyuan.com/tags/index.html","excerpt":"","text":""},{"title":"","date":"2016-12-14T03:39:11.000Z","updated":"2016-12-14T02:30:45.000Z","comments":false,"path":"categories/index.html","permalink":"http://www.zhimakaiyuan.com/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"(è½¬è½½)ç»†è¯´GCDï¼ˆGrand Central Dispatchï¼‰å¦‚ä½•ç”¨","slug":"GCD-and-how-to-use","date":"2016-12-26T00:50:22.000Z","updated":"2016-12-26T01:10:54.000Z","comments":true,"path":"2016/12/26/GCD-and-how-to-use/","link":"","permalink":"http://www.zhimakaiyuan.com/2016/12/26/GCD-and-how-to-use/","excerpt":"æ–‡ä¸­è¾ƒè¯¦ç»†ä»‹ç»GCDé˜Ÿåˆ—ï¼Œå„ç§GCDä½¿ç”¨æ–¹æ³•ï¼Œå®ä¾‹å¦‚ä½•ä½¿ç”¨Dispatch Sourceç›‘å¬ç³»ç»Ÿåº•å±‚å¯¹è±¡ï¼Œåˆ†æä¸åŒé”çš„æ€§èƒ½å¯¹æ¯”ï¼Œå®ä¾‹GCDæ­»é”æƒ…å†µã€‚æ–‡ä¸­çš„Demoåœ¨è¿™é‡Œ https://github.com/ming1016/GCDDemo å¯¹ç€æ–‡ç« è¯•ç€æ¥è°ƒdemoä½“ä¼šæ›´æ·±å“¦ï¼Œç»†ç»†åš¼æ¶ˆåŒ–å¥½:)","text":"æ–‡ä¸­è¾ƒè¯¦ç»†ä»‹ç»GCDé˜Ÿåˆ—ï¼Œå„ç§GCDä½¿ç”¨æ–¹æ³•ï¼Œå®ä¾‹å¦‚ä½•ä½¿ç”¨Dispatch Sourceç›‘å¬ç³»ç»Ÿåº•å±‚å¯¹è±¡ï¼Œåˆ†æä¸åŒé”çš„æ€§èƒ½å¯¹æ¯”ï¼Œå®ä¾‹GCDæ­»é”æƒ…å†µã€‚æ–‡ä¸­çš„Demoåœ¨è¿™é‡Œ https://github.com/ming1016/GCDDemo å¯¹ç€æ–‡ç« è¯•ç€æ¥è°ƒdemoä½“ä¼šæ›´æ·±å“¦ï¼Œç»†ç»†åš¼æ¶ˆåŒ–å¥½:)åšå®¢åŸæ–‡é“¾æ¥:https://github.com/ming1016/study/wiki/%E7%BB%86%E8%AF%B4GCD%EF%BC%88Grand-Central-Dispatch%EF%BC%89%E5%A6%82%E4%BD%95%E7%94%A8#gcd%E6%A6%82%E8%A6%81 GCDï¼ˆGrand Central Dispatchï¼‰ ä»‹ç»GCDå±äºç³»ç»Ÿçº§çš„çº¿ç¨‹ç®¡ç†ï¼Œåœ¨Dispatch queueä¸­æ‰§è¡Œéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡æ€§èƒ½éå¸¸çš„é«˜ã€‚GCDè¿™å—å·²ç»å¼€æºï¼Œåœ°å€http://libdispatch.macosforge.orgã€‚GCDä¸­çš„FIFOé˜Ÿåˆ—ç§°ä¸ºdispatch queueï¼Œç”¨æ¥ä¿è¯å…ˆè¿›æ¥çš„ä»»åŠ¡å…ˆå¾—åˆ°æ‰§è¡Œã€‚ GCDæ¦‚è¦ å’Œoperation queueä¸€æ ·éƒ½æ˜¯åŸºäºé˜Ÿåˆ—çš„å¹¶å‘ç¼–ç¨‹APIï¼Œä»–ä»¬é€šè¿‡é›†ä¸­ç®¡ç†å¤§å®¶ååŒä½¿ç”¨çš„çº¿ç¨‹æ± ã€‚ å…¬å¼€çš„5ä¸ªä¸åŒé˜Ÿåˆ—ï¼šè¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸­çš„main queueï¼Œ3ä¸ªä¸åŒä¼˜å…ˆçº§çš„åå°é˜Ÿåˆ—ï¼ˆHigh Priority Queueï¼ŒDefault Priority Queueï¼ŒLow Priority Queueï¼‰ï¼Œä»¥åŠä¸€ä¸ªä¼˜å…ˆçº§æ›´ä½çš„åå°é˜Ÿåˆ—Background Priority Queueï¼ˆç”¨äºI/Oï¼‰ å¯åˆ›å»ºè‡ªå®šä¹‰é˜Ÿåˆ—ï¼šä¸²è¡Œæˆ–å¹¶åˆ—é˜Ÿåˆ—ã€‚è‡ªå®šä¹‰ä¸€èˆ¬æ”¾åœ¨Default Priority Queueå’ŒMain Queueé‡Œã€‚ æ“ä½œæ˜¯åœ¨å¤šçº¿ç¨‹ä¸Šè¿˜æ˜¯å•çº¿ç¨‹ä¸»è¦æ˜¯çœ‹é˜Ÿåˆ—çš„ç±»å‹å’Œæ‰§è¡Œæ–¹æ³•ï¼Œå¹¶è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œæ‰èƒ½åœ¨å¤šçº¿ç¨‹ï¼Œå¹¶è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œå°±åªä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œäº† åŸºæœ¬æ¦‚å¿µ ç³»ç»Ÿæ ‡å‡†ä¸¤ä¸ªé˜Ÿåˆ— 1234//å…¨å±€é˜Ÿåˆ—ï¼Œä¸€ä¸ªå¹¶è¡Œçš„é˜Ÿåˆ—dispatch_get_global_queue//ä¸»é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹ä¸­çš„å”¯ä¸€é˜Ÿåˆ—ï¼Œä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—dispatch_get_main_queue è‡ªå®šä¹‰é˜Ÿåˆ— 1234//ä¸²è¡Œé˜Ÿåˆ—dispatch_queue_create(&quot;com.starming.serialqueue&quot;, DISPATCH_QUEUE_SERIAL)//å¹¶è¡Œé˜Ÿåˆ—dispatch_queue_create(&quot;com.starming.concurrentqueue&quot;, DISPATCH_QUEUE_CONCURRENT) åŒæ­¥å¼‚æ­¥çº¿ç¨‹åˆ›å»º 1234//åŒæ­¥çº¿ç¨‹dispatch_sync(..., ^(block))//å¼‚æ­¥çº¿ç¨‹dispatch_async(..., ^(block)) é˜Ÿåˆ—ï¼ˆdispatch queueï¼‰ Serialï¼šåˆå«private dispatch queuesï¼ŒåŒæ—¶åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚Serial queueå¸¸ç”¨äºåŒæ­¥è®¿é—®ç‰¹å®šçš„èµ„æºæˆ–æ•°æ®ã€‚å½“ä½ åˆ›å»ºå¤šä¸ªSerial queueæ—¶ï¼Œè™½ç„¶å„è‡ªæ˜¯åŒæ­¥ï¼Œä½†serial queueä¹‹é—´æ˜¯å¹¶å‘æ‰§è¡Œã€‚ Main dispatch queueï¼šå…¨å±€å¯ç”¨çš„serial queueï¼Œåœ¨åº”ç”¨ç¨‹åºä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œä»»åŠ¡ã€‚ Concurrentï¼šåˆå«global dispatch queueï¼Œå¯ä»¥å¹¶å‘çš„æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œä½†æ‰§è¡Œå®Œæˆé¡ºåºæ˜¯éšæœºçš„ã€‚ç³»ç»Ÿæä¾›å››ä¸ªå…¨å±€å¹¶å‘é˜Ÿåˆ—ï¼Œè¿™å››ä¸ªé˜Ÿåˆ—æœ‰ç€å¯¹åº”çš„ä¼˜å…ˆçº§ï¼Œç”¨æˆ·æ˜¯ä¸èƒ½å¤Ÿåˆ›å»ºå…¨å±€é˜Ÿåˆ—çš„ï¼Œåªèƒ½è·å–ã€‚ 12dipatch_queue_t queue;queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,0); user create queueï¼šåˆ›å»ºè‡ªå·±å®šä¹‰çš„é˜Ÿåˆ—ï¼Œå¯ä»¥ç”¨dispatch_queue_createå‡½æ•°ï¼Œå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªè‡ªå®šä¹‰çš„é˜Ÿåˆ—åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é˜Ÿåˆ—ç±»å‹ï¼Œé»˜è®¤NULLæˆ–è€…DISPATCH_QUEUE_SERIALçš„æ˜¯ä¸²è¡Œï¼Œå‚æ•°ä¸ºDISPATCH_QUEUE_CONCURRENTä¸ºå¹¶è¡Œé˜Ÿåˆ—ã€‚ 12dispatch_queue_t queuequeue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;, DISPATCH_QUEUE_CONCURRENT); è‡ªå®šä¹‰é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ï¼šå¯ä»¥é€šè¿‡dipatch_queue_attr_make_with_qos_classæˆ–dispatch_set_target_queueæ–¹æ³•è®¾ç½®é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ 12345678//dipatch_queue_attr_make_with_qos_classdispatch_queue_attr_t attr = dispatch_queue_attr_make_with_qos_class(DISPATCH_QUEUE_SERIAL, QOS_CLASS_UTILITY, -1);dispatch_queue_t queue = dispatch_queue_create(&quot;com.starming.gcddemo.qosqueue&quot;, attr);//dispatch_set_target_queuedispatch_queue_t queue = dispatch_queue_create(&quot;com.starming.gcddemo.settargetqueue&quot;,NULL); //éœ€è¦è®¾ç½®ä¼˜å…ˆçº§çš„queuedispatch_queue_t referQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0); //å‚è€ƒä¼˜å…ˆçº§dispatch_set_target_queue(queue, referQueue); //è®¾ç½®queueå’ŒreferQueueçš„ä¼˜å…ˆçº§ä¸€æ · dispatch_set_target_queueï¼šå¯ä»¥è®¾ç½®ä¼˜å…ˆçº§ï¼Œä¹Ÿå¯ä»¥è®¾ç½®é˜Ÿåˆ—å±‚çº§ä½“ç³»ï¼Œæ¯”å¦‚è®©å¤šä¸ªä¸²è¡Œå’Œå¹¶è¡Œé˜Ÿåˆ—åœ¨ç»Ÿä¸€ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—é‡Œä¸²è¡Œæ‰§è¡Œï¼Œå¦‚ä¸‹ 12345678910111213141516171819dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL);dispatch_queue_t firstQueue = dispatch_queue_create(&quot;com.starming.gcddemo.firstqueue&quot;, DISPATCH_QUEUE_SERIAL);dispatch_queue_t secondQueue = dispatch_queue_create(&quot;com.starming.gcddemo.secondqueue&quot;, DISPATCH_QUEUE_CONCURRENT);dispatch_set_target_queue(firstQueue, serialQueue);dispatch_set_target_queue(secondQueue, serialQueue);dispatch_async(firstQueue, ^&#123; NSLog(@&quot;1&quot;); [NSThread sleepForTimeInterval:3.f];&#125;);dispatch_async(secondQueue, ^&#123; NSLog(@&quot;2&quot;); [NSThread sleepForTimeInterval:2.f];&#125;);dispatch_async(secondQueue, ^&#123; NSLog(@&quot;3&quot;); [NSThread sleepForTimeInterval:1.f];&#125;); é˜Ÿåˆ—ç±»å‹é˜Ÿåˆ—é»˜è®¤æ˜¯ä¸²è¡Œçš„ï¼Œå¦‚æœè®¾ç½®æ”¹å‚æ•°ä¸ºNULLä¼šæŒ‰ä¸²è¡Œå¤„ç†ï¼Œåªèƒ½æ‰§è¡Œä¸€ä¸ªå•ç‹¬çš„blockï¼Œé˜Ÿåˆ—ä¹Ÿå¯ä»¥æ˜¯å¹¶è¡Œçš„ï¼ŒåŒä¸€æ—¶é—´æ‰§è¡Œå¤šä¸ªblock123456789101112- (id)init;&#123; self = [super init]; if (self != nil) &#123; NSString *label = [NSString stringWithFormat:@&quot;%@.isolation.%p&quot;, [self class], self]; self.isolationQueue = dispatch_queue_create([label UTF8String], 0); label = [NSString stringWithFormat:@&quot;%@.work.%p&quot;, [self class], self]; self.workQueue = dispatch_queue_create([label UTF8String], 0); &#125; return self;&#125; 5ç§é˜Ÿåˆ—ï¼Œä¸»é˜Ÿåˆ—ï¼ˆmain queueï¼‰,å››ç§é€šç”¨è°ƒåº¦é˜Ÿåˆ—ï¼Œè‡ªå·±å®šåˆ¶çš„é˜Ÿåˆ—ã€‚å››ç§é€šç”¨è°ƒåº¦é˜Ÿåˆ—ä¸º QOS_CLASS_USER_INTERACTIVEï¼šuser interactiveç­‰çº§è¡¨ç¤ºä»»åŠ¡éœ€è¦è¢«ç«‹å³æ‰§è¡Œæä¾›å¥½çš„ä½“éªŒï¼Œç”¨æ¥æ›´æ–°UIï¼Œå“åº”äº‹ä»¶ç­‰ã€‚è¿™ä¸ªç­‰çº§æœ€å¥½ä¿æŒå°è§„æ¨¡ã€‚ QOS_CLASS_USER_INITIATEDï¼šuser initiatedç­‰çº§è¡¨ç¤ºä»»åŠ¡ç”±UIå‘èµ·å¼‚æ­¥æ‰§è¡Œã€‚é€‚ç”¨åœºæ™¯æ˜¯éœ€è¦åŠæ—¶ç»“æœåŒæ—¶åˆå¯ä»¥ç»§ç»­äº¤äº’çš„æ—¶å€™ã€‚ QOS_CLASS_UTILITYï¼šutilityç­‰çº§è¡¨ç¤ºéœ€è¦é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œä¼´æœ‰ç”¨æˆ·å¯è§è¿›åº¦æŒ‡ç¤ºå™¨ã€‚ç»å¸¸ä¼šç”¨æ¥åšè®¡ç®—ï¼ŒI/Oï¼Œç½‘ç»œï¼ŒæŒç»­çš„æ•°æ®å¡«å……ç­‰ä»»åŠ¡ã€‚è¿™ä¸ªä»»åŠ¡èŠ‚èƒ½ã€‚ QOS_CLASS_BACKGROUNDï¼šbackgroundç­‰çº§è¡¨ç¤ºç”¨æˆ·ä¸ä¼šå¯Ÿè§‰çš„ä»»åŠ¡ï¼Œä½¿ç”¨å®ƒæ¥å¤„ç†é¢„åŠ è½½ï¼Œæˆ–è€…ä¸éœ€è¦ç”¨æˆ·äº¤äº’å’Œå¯¹æ—¶é—´ä¸æ•æ„Ÿçš„ä»»åŠ¡ã€‚ ç¤ºä¾‹ï¼šåå°åŠ è½½æ˜¾ç¤ºå›¾ç‰‡12345678910override func viewDidLoad() &#123; super.viewDidLoad() dispatch_async(dispatch_get_global_queue(Int(QOS_CLASS_USER_INITIATED.value), 0)) &#123; // å°†å·¥ä½œä»ä¸»çº¿ç¨‹è½¬ç§»åˆ°å…¨å±€é˜Ÿåˆ—ä¸­ï¼Œè¿™æ˜¯dispatch_asyncè°ƒç”¨ï¼Œå¼‚æ­¥æäº¤ä¿è¯è°ƒç”¨çº¿ç¨‹ä¼šç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œè¿™æ ·viewDidLoadåœ¨ä¸»çº¿ç¨‹ä¸Šèƒ½å¤Ÿæ›´æ—©å®Œæˆï¼Œ let overlayImage = self.faceOverlayImageFromImage(self.image) dispatch_async(dispatch_get_main_queue()) &#123; // æ–°å›¾å®Œæˆï¼ŒæŠŠä¸€ä¸ªé—­åŒ…åŠ å…¥ä¸»çº¿ç¨‹ç”¨æ¥æ›´æ–°UIImageViewï¼Œåªæœ‰åœ¨ä¸»çº¿ç¨‹èƒ½æ“ä½œUIKitã€‚ self.fadeInNewImage(overlayImage) // æ›´æ–°UI &#125; &#125;&#125; ä½•æ—¶ä½¿ç”¨ä½•ç§é˜Ÿåˆ—ç±»å‹ ä¸»é˜Ÿåˆ—ï¼ˆé¡ºåºï¼‰ï¼šé˜Ÿåˆ—ä¸­æœ‰ä»»åŠ¡å®Œæˆéœ€è¦æ›´æ–°UIæ—¶ï¼Œdispatch_afteråœ¨è¿™ç§ç±»å‹ä¸­ä½¿ç”¨ã€‚ å¹¶å‘é˜Ÿåˆ—ï¼šç”¨æ¥æ‰§è¡Œä¸UIæ— å…³çš„åå°ä»»åŠ¡ï¼Œdispatch_syncæ”¾åœ¨è¿™é‡Œï¼Œæ–¹ä¾¿ç­‰å¾…ä»»åŠ¡å®Œæˆè¿›è¡Œåç»­å¤„ç†æˆ–å’Œdispatch barrieråŒæ­¥ã€‚dispatch groupsæ”¾åœ¨è¿™é‡Œä¹Ÿä¸é”™ã€‚ è‡ªå®šä¹‰é¡ºåºé˜Ÿåˆ—ï¼šé¡ºåºæ‰§è¡Œåå°ä»»åŠ¡å¹¶è¿½è¸ªå®ƒæ—¶ã€‚è¿™æ ·åšåŒæ—¶åªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œå¯ä»¥é˜²æ­¢èµ„æºç«äº‰ã€‚dipatch barriersè§£å†³è¯»å†™é”é—®é¢˜çš„æ”¾åœ¨è¿™é‡Œå¤„ç†ã€‚dispatch groupsä¹Ÿæ˜¯æ”¾åœ¨è¿™é‡Œã€‚ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ç®€åŒ–QoSç­‰çº§å‚æ•°çš„å†™æ³•1234567891011121314151617181920212223var GlobalMainQueue: dispatch_queue_t &#123; return dispatch_get_main_queue()&#125;var GlobalUserInteractiveQueue: dispatch_queue_t &#123; return dispatch_get_global_queue(Int(QOS_CLASS_USER_INTERACTIVE.value), 0)&#125;var GlobalUserInitiatedQueue: dispatch_queue_t &#123; return dispatch_get_global_queue(Int(QOS_CLASS_USER_INITIATED.value), 0)&#125;var GlobalUtilityQueue: dispatch_queue_t &#123; return dispatch_get_global_queue(Int(QOS_CLASS_UTILITY.value), 0)&#125;var GlobalBackgroundQueue: dispatch_queue_t &#123; return dispatch_get_global_queue(Int(QOS_CLASS_BACKGROUND.value), 0)&#125;//ä½¿ç”¨èµ·æ¥å°±æ˜¯è¿™æ ·ï¼Œæ˜“è¯»è€Œä¸”å®¹æ˜“çœ‹å‡ºåœ¨ä½¿ç”¨å“ªä¸ªé˜Ÿåˆ—dispatch_async(GlobalUserInitiatedQueue) &#123; let overlayImage = self.faceOverlayImageFromImage(self.image) dispatch_async(GlobalMainQueue) &#123; self.fadeInNewImage(overlayImage) &#125;&#125; dispatch_onceç”¨æ³•dispatch_once_tè¦æ˜¯å…¨å±€æˆ–staticå˜é‡ï¼Œä¿è¯dispatch_once_tåªæœ‰ä¸€ä»½å®ä¾‹12345678910+ (UIColor *)boringColor;&#123; static UIColor *color; //åªè¿è¡Œä¸€æ¬¡ static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; color = [UIColor colorWithRed:0.380f green:0.376f blue:0.376f alpha:1.000f]; &#125;); return color;&#125; dispatch_asyncè®¾è®¡ä¸€ä¸ªå¼‚æ­¥çš„APIè°ƒç”¨dispatch_async()ï¼Œè¿™ä¸ªè°ƒç”¨æ”¾åœ¨APIçš„æ–¹æ³•æˆ–å‡½æ•°ä¸­åšã€‚è®©APIçš„ä½¿ç”¨è€…è®¾ç½®ä¸€ä¸ªå›è°ƒå¤„ç†é˜Ÿåˆ—123456789- (void)processImage:(UIImage *)image completionHandler:(void(^)(BOOL success))handler;&#123; dispatch_async(self.isolationQueue, ^(void)&#123; // do actual processing here dispatch_async(self.resultQueue, ^(void)&#123; handler(YES); &#125;); &#125;);&#125; å¯ä»¥é¿å…ç•Œé¢ä¼šè¢«ä¸€äº›è€—æ—¶çš„æ“ä½œå¡æ­»ï¼Œæ¯”å¦‚è¯»å–ç½‘ç»œæ•°æ®ï¼Œå¤§æ•°æ®IOï¼Œè¿˜æœ‰å¤§é‡æ•°æ®çš„æ•°æ®åº“è¯»å†™ï¼Œè¿™æ—¶éœ€è¦åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­å¤„ç†ï¼Œç„¶åé€šçŸ¥ä¸»çº¿ç¨‹æ›´æ–°ç•Œé¢ï¼ŒGCDä½¿ç”¨èµ·æ¥æ¯”NSThreadå’ŒNSOperationæ–¹æ³•è¦ç®€å•æ–¹ä¾¿ã€‚12345678910111213141516171819//ä»£ç æ¡†æ¶dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; // è€—æ—¶çš„æ“ä½œ dispatch_async(dispatch_get_main_queue(), ^&#123; // æ›´æ–°ç•Œé¢ &#125;);&#125;);//ä¸‹è½½å›¾ç‰‡çš„ç¤ºä¾‹dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; NSURL * url = [NSURL URLWithString:@&quot;http://avatar.csdn.net/2/C/D/1_totogo2010.jpg&quot;]; NSData * data = [[NSData alloc]initWithContentsOfURL:url]; UIImage *image = [[UIImage alloc]initWithData:data]; if (data != nil) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; self.imageView.image = image; &#125;); &#125;&#125;); dispatch_afterå»¶åæ‰§è¡Œdispatch_afteråªæ˜¯å»¶æ—¶æäº¤blockï¼Œä¸æ˜¯å»¶æ—¶ç«‹åˆ»æ‰§è¡Œã€‚12345678- (void)foo&#123; double delayInSeconds = 2.0; dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t) (delayInSeconds * NSEC_PER_SEC)); dispatch_after(popTime, dispatch_get_main_queue(), ^(void)&#123; [self bar]; &#125;);&#125; èŒƒä¾‹ï¼Œå®ç°ä¸€ä¸ªæ¨è¿Ÿå‡ºç°å¼¹å‡ºæ¡†æç¤ºï¼Œæ¯”å¦‚è¯´æç¤ºç”¨æˆ·è¯„ä»·ç­‰åŠŸèƒ½ã€‚12345678910111213func showOrHideNavPrompt() &#123; let delayInSeconds = 1.0 let popTime = dispatch_time(DISPATCH_TIME_NOW, Int64(delayInSeconds * Double(NSEC_PER_SEC))) // åœ¨è¿™é‡Œå£°æ˜æ¨è¿Ÿçš„æ—¶é—´ dispatch_after(popTime, GlobalMainQueue) &#123; // ç­‰å¾…delayInSecondså°†é—­åŒ…å¼‚æ­¥åˆ°ä¸»é˜Ÿåˆ— let count = PhotoManager.sharedManager.photos.count if count &gt; 0 &#123; self.navigationItem.prompt = nil &#125; else &#123; self.navigationItem.prompt = \"Add photos with faces to Googlyify them!\" &#125; &#125;&#125; ä¾‹å­ä¸­çš„dispatch timeçš„å‚æ•°ï¼Œå¯ä»¥å…ˆçœ‹çœ‹å‡½æ•°åŸå‹1dispatch_time_t dispatch_time ( dispatch_time_t when, int64_t delta ); ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºDISPATCH_TIME_NOWè¡¨ç¤ºå½“å‰ã€‚ç¬¬äºŒä¸ªå‚æ•°çš„deltaè¡¨ç¤ºçº³ç§’ï¼Œä¸€ç§’å¯¹åº”çš„çº³ç§’ä¸º1000000000ï¼Œç³»ç»Ÿæä¾›äº†ä¸€äº›å®æ¥ç®€åŒ–123#define NSEC_PER_SEC 1000000000ull //æ¯ç§’æœ‰å¤šå°‘çº³ç§’#define USEC_PER_SEC 1000000ull //æ¯ç§’æœ‰å¤šå°‘æ¯«ç§’#define NSEC_PER_USEC 1000ull //æ¯æ¯«ç§’æœ‰å¤šå°‘çº³ç§’ è¿™æ ·å¦‚æœè¦è¡¨ç¤ºä¸€ç§’å°±å¯ä»¥è¿™æ ·å†™123dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);dispatch_time(DISPATCH_TIME_NOW, 1000 * USEC_PER_SEC);dispatch_time(DISPATCH_TIME_NOW, USEC_PER_SEC * NSEC_PER_USEC); dispatch_barrier_asyncä½¿ç”¨Barrier Taskæ–¹æ³•Dispatch Barrierè§£å†³å¤šçº¿ç¨‹å¹¶å‘è¯»å†™åŒä¸€ä¸ªèµ„æºå‘ç”Ÿæ­»é”Dispatch Barrierç¡®ä¿æäº¤çš„é—­åŒ…æ˜¯æŒ‡å®šé˜Ÿåˆ—ä¸­åœ¨ç‰¹å®šæ—¶æ®µå”¯ä¸€åœ¨æ‰§è¡Œçš„ä¸€ä¸ªã€‚åœ¨æ‰€æœ‰å…ˆäºDispatch Barrierçš„ä»»åŠ¡éƒ½å®Œæˆçš„æƒ…å†µä¸‹è¿™ä¸ªé—­åŒ…æ‰å¼€å§‹æ‰§è¡Œã€‚è½®åˆ°è¿™ä¸ªé—­åŒ…æ—¶barrierä¼šæ‰§è¡Œè¿™ä¸ªé—­åŒ…å¹¶ä¸”ç¡®ä¿é˜Ÿåˆ—åœ¨æ­¤è¿‡ç¨‹ä¸ä¼šæ‰§è¡Œå…¶å®ƒä»»åŠ¡ã€‚é—­åŒ…å®Œæˆåé˜Ÿåˆ—æ¢å¤ã€‚éœ€è¦æ³¨æ„dispatch_barrier_asyncåªåœ¨è‡ªå·±åˆ›å»ºçš„é˜Ÿåˆ—ä¸Šæœ‰è¿™ç§ä½œç”¨ï¼Œåœ¨å…¨å±€å¹¶å‘é˜Ÿåˆ—å’Œä¸²è¡Œé˜Ÿåˆ—ä¸Šï¼Œæ•ˆæœå’Œdispatch_syncä¸€æ ·1234567891011121314151617181920212223242526272829303132333435363738//åˆ›å»ºé˜Ÿåˆ—self.isolationQueue = dispatch_queue_create([label UTF8String], DISPATCH_QUEUE_CONCURRENT);//æ”¹å˜setter- (void)setCount:(NSUInteger)count forKey:(NSString *)key&#123; key = [key copy]; //ç¡®ä¿æ‰€æœ‰barrieréƒ½æ˜¯asyncå¼‚æ­¥çš„ dispatch_barrier_async(self.isolationQueue, ^()&#123; if (count == 0) &#123; [self.counts removeObjectForKey:key]; &#125; else &#123; self.counts[key] = @(count); &#125; &#125;);&#125;- (void)dispatchBarrierAsyncDemo &#123; //é˜²æ­¢æ–‡ä»¶è¯»å†™å†²çªï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ï¼Œæ“ä½œéƒ½åœ¨è¿™ä¸ªé˜Ÿåˆ—ä¸­è¿›è¡Œï¼Œæ²¡æœ‰æ›´æ–°æ•°æ®è¯»ç”¨å¹¶è¡Œï¼Œå†™ç”¨ä¸²è¡Œã€‚ dispatch_queue_t dataQueue = dispatch_queue_create(&quot;com.starming.gcddemo.dataqueue&quot;, DISPATCH_QUEUE_CONCURRENT); dispatch_async(dataQueue, ^&#123; [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;read data 1&quot;); &#125;); dispatch_async(dataQueue, ^&#123; NSLog(@&quot;read data 2&quot;); &#125;); //ç­‰å¾…å‰é¢çš„éƒ½å®Œæˆï¼Œåœ¨æ‰§è¡Œbarrieråé¢çš„ dispatch_barrier_async(dataQueue, ^&#123; NSLog(@&quot;write data 1&quot;); [NSThread sleepForTimeInterval:1]; &#125;); dispatch_async(dataQueue, ^&#123; [NSThread sleepForTimeInterval:1.f]; NSLog(@&quot;read data 3&quot;); &#125;); dispatch_async(dataQueue, ^&#123; NSLog(@&quot;read data 4&quot;); &#125;);&#125; swiftç¤ºä¾‹12345678910111213141516171819202122//ä½¿ç”¨dispatch_queue_createåˆå§‹åŒ–ä¸€ä¸ªå¹¶å‘é˜Ÿåˆ—ã€‚ç¬¬ä¸€ä¸ªå‚æ•°éµå¾ªåå‘DNSå‘½åä¹ æƒ¯ï¼Œæ–¹ä¾¿æè¿°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å‡ºæ˜¯å¹¶å‘è¿˜æ˜¯é¡ºåºã€‚private let concurrentPhotoQueue = dispatch_queue_create(\"com.raywenderlich.GooglyPuff.photoQueue\", DISPATCH_QUEUE_CONCURRENT)func addPhoto(photo: Photo) &#123; dispatch_barrier_async(concurrentPhotoQueue) &#123; // å°†å†™æ“ä½œåŠ å…¥åˆ°è‡ªå®šä¹‰çš„é˜Ÿåˆ—ã€‚å¼€å§‹æ‰§è¡Œæ—¶è¿™ä¸ªå°±æ˜¯é˜Ÿåˆ—ä¸­å”¯ä¸€çš„ä¸€ä¸ªåœ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚ self._photos.append(photo) // barrierèƒ½å¤Ÿä¿éšœä¸ä¼šå’Œå…¶ä»–ä»»åŠ¡åŒæ—¶è¿›è¡Œã€‚ dispatch_async(GlobalMainQueue) &#123; // æ¶‰åŠåˆ°UIæ‰€ä»¥è¿™ä¸ªé€šçŸ¥åº”è¯¥åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥åˆ†æ´¾å¦ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡åˆ°ä¸»é˜Ÿåˆ—ä¸­ã€‚ self.postContentAddedNotification() &#125; &#125;&#125;//ä¸Šé¢æ˜¯è§£å†³äº†å†™å¯èƒ½å‘ç”Ÿæ­»é”ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨dispatch_syncè§£å†³è¯»æ—¶å¯èƒ½ä¼šå‘ç”Ÿçš„æ­»é”ã€‚var photos: [Photo] &#123; var photosCopy: [Photo]! dispatch_sync(concurrentPhotoQueue) &#123; // åŒæ­¥è°ƒåº¦åˆ°concurrentPhotoQueueé˜Ÿåˆ—æ‰§è¡Œè¯»æ“ä½œ photosCopy = self._photos // ä¿å­˜ &#125; return photosCopy&#125;//è¿™æ ·è¯»å†™é—®é¢˜éƒ½è§£å†³äº†ã€‚ éƒ½ç”¨å¼‚æ­¥å¤„ç†é¿å…æ­»é”ï¼Œå¼‚æ­¥çš„ç¼ºç‚¹åœ¨äºè°ƒè¯•ä¸æ–¹ä¾¿ï¼Œä½†æ˜¯æ¯”èµ·åŒæ­¥å®¹æ˜“äº§ç”Ÿæ­»é”è¿™ä¸ªå‰¯ä½œç”¨è¿˜ç®—å°çš„ã€‚ dispatch_applyè¿›è¡Œå¿«é€Ÿè¿­ä»£ç±»ä¼¼forå¾ªç¯ï¼Œä½†æ˜¯åœ¨å¹¶å‘é˜Ÿåˆ—çš„æƒ…å†µä¸‹dispatch_applyä¼šå¹¶å‘æ‰§è¡Œblockä»»åŠ¡ã€‚12345678910111213for (size_t y = 0; y &lt; height; ++y) &#123; for (size_t x = 0; x &lt; width; ++x) &#123; // Do something with x and y here &#125;&#125;//å› ä¸ºå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæ‰€ä»¥ä½¿ç”¨dispatch_applyå¯ä»¥è¿è¡Œçš„æ›´å¿«- (void)dispatchApplyDemo &#123; dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;, DISPATCH_QUEUE_CONCURRENT); dispatch_apply(10, concurrentQueue, ^(size_t i) &#123; NSLog(@&quot;%zu&quot;,i); &#125;); NSLog(@&quot;The end&quot;); //è¿™é‡Œæœ‰ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œdispatch_applyè¿™ä¸ªæ˜¯ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„ã€‚è¿™ä¸ªlogæ‰“å°ä¼šåœ¨dispatch_applyéƒ½ç»“æŸåæ‰å¼€å§‹æ‰§è¡Œ&#125; dispatch_applyèƒ½é¿å…çº¿ç¨‹çˆ†ç‚¸ï¼Œå› ä¸ºGCDä¼šç®¡ç†å¹¶å‘123456789101112131415161718- (void)dealWiththreadWithMaybeExplode:(BOOL)explode &#123; dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); if (explode) &#123; //æœ‰é—®é¢˜çš„æƒ…å†µï¼Œå¯èƒ½ä¼šæ­»é” for (int i = 0; i &lt; 999 ; i++) &#123; dispatch_async(concurrentQueue, ^&#123; NSLog(@&quot;wrong %d&quot;,i); //do something hard &#125;); &#125; &#125; else &#123; //ä¼šä¼˜åŒ–å¾ˆå¤šï¼Œèƒ½å¤Ÿåˆ©ç”¨GCDç®¡ç† dispatch_apply(999, concurrentQueue, ^(size_t i)&#123; NSLog(@&quot;correct %zu&quot;,i); //do something hard &#125;); &#125;&#125; ç¤ºä¾‹ï¼š1234567891011121314151617181920212223242526272829func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) &#123; var storedError: NSError! var downloadGroup = dispatch_group_create() let addresses = [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] dispatch_apply(UInt(addresses.count), GlobalUserInitiatedQueue) &#123; i in let index = Int(i) let address = addresses[index] let url = NSURL(string: address) dispatch_group_enter(downloadGroup) let photo = DownloadPhoto(url: url!) &#123; image, error in if let error = error &#123; storedError = error &#125; dispatch_group_leave(downloadGroup) &#125; PhotoManager.sharedManager.addPhoto(photo) &#125; dispatch_group_notify(downloadGroup, GlobalMainQueue) &#123; if let completion = completion &#123; completion(error: storedError) &#125; &#125;&#125; Blockç»„åˆDispatch_groupsdispatch groupsæ˜¯ä¸“é—¨ç”¨æ¥ç›‘è§†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚dispatch_group_tå®ä¾‹ç”¨æ¥è¿½è¸ªä¸åŒé˜Ÿåˆ—ä¸­çš„ä¸åŒä»»åŠ¡ã€‚ å½“groupé‡Œæ‰€æœ‰äº‹ä»¶éƒ½å®ŒæˆGCD APIæœ‰ä¸¤ç§æ–¹å¼å‘é€é€šçŸ¥ï¼Œç¬¬ä¸€ç§æ˜¯dispatch_group_waitï¼Œä¼šé˜»å¡å½“å‰è¿›ç¨‹ï¼Œç­‰æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆæˆ–ç­‰å¾…è¶…æ—¶ã€‚ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨dispatch_group_notifyï¼Œå¼‚æ­¥æ‰§è¡Œé—­åŒ…ï¼Œä¸ä¼šé˜»å¡ã€‚ ç¬¬ä¸€ç§ä½¿ç”¨dispatch_group_waitçš„swiftçš„ä¾‹å­ï¼š1234567891011121314151617181920212223242526272829func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) &#123; dispatch_async(GlobalUserInitiatedQueue) &#123; // å› ä¸ºdispatch_group_waitä¼šç§Ÿå¡å½“å‰è¿›ç¨‹ï¼Œæ‰€ä»¥è¦ä½¿ç”¨dispatch_asyncå°†æ•´ä¸ªæ–¹æ³•è¦æ”¾åˆ°åå°é˜Ÿåˆ—æ‰èƒ½å¤Ÿä¿è¯ä¸»çº¿ç¨‹ä¸è¢«é˜»å¡ var storedError: NSError! var downloadGroup = dispatch_group_create() // åˆ›å»ºä¸€ä¸ªdispatch group for address in [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] &#123; let url = NSURL(string: address) dispatch_group_enter(downloadGroup) // dispatch_group_enteræ˜¯é€šçŸ¥dispatch groupä»»åŠ¡å¼€å§‹äº†ï¼Œdispatch_group_enterå’Œdispatch_group_leaveæ˜¯æˆå¯¹è°ƒç”¨ï¼Œä¸ç„¶ç¨‹åºå°±å´©æºƒäº†ã€‚ let photo = DownloadPhoto(url: url!) &#123; image, error in if let error = error &#123; storedError = error &#125; dispatch_group_leave(downloadGroup) // ä¿æŒå’Œdispatch_group_enteré…å¯¹ã€‚é€šçŸ¥ä»»åŠ¡å·²ç»å®Œæˆ &#125; PhotoManager.sharedManager.addPhoto(photo) &#125; dispatch_group_wait(downloadGroup, DISPATCH_TIME_FOREVER) // dispatch_group_waitç­‰å¾…æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆç›´åˆ°è¶…æ—¶ã€‚å¦‚æœä»»åŠ¡å®Œæˆå‰å°±è¶…æ—¶äº†ï¼Œå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéé›¶å€¼ï¼Œå¯ä»¥é€šè¿‡è¿”å›å€¼åˆ¤æ–­æ˜¯å¦è¶…æ—¶ã€‚ä¹Ÿå¯ä»¥ç”¨DISPATCH_TIME_FOREVERè¡¨ç¤ºä¸€ç›´ç­‰ã€‚ dispatch_async(GlobalMainQueue) &#123; // è¿™é‡Œå¯ä»¥ä¿è¯æ‰€æœ‰å›¾ç‰‡ä»»åŠ¡éƒ½å®Œæˆï¼Œç„¶ååœ¨main queueé‡ŒåŠ å…¥å®Œæˆåè¦å¤„ç†çš„é—­åŒ…ï¼Œä¼šåœ¨main queueé‡Œæ‰§è¡Œã€‚ if let completion = completion &#123; // æ‰§è¡Œé—­åŒ…å†…å®¹ completion(error: storedError) &#125; &#125; &#125;&#125; ocä¾‹å­1234567891011121314- (void)dispatchGroupWaitDemo &#123; dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); dispatch_group_t group = dispatch_group_create(); //åœ¨groupä¸­æ·»åŠ é˜Ÿåˆ—çš„block dispatch_group_async(group, concurrentQueue, ^&#123; [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;1&quot;); &#125;); dispatch_group_async(group, concurrentQueue, ^&#123; NSLog(@&quot;2&quot;); &#125;); dispatch_group_wait(group, DISPATCH_TIME_FOREVER); NSLog(@&quot;go on&quot;);&#125; ç¬¬äºŒç§ä½¿ç”¨dispatch_group_notifyçš„swiftçš„ä¾‹å­ï¼š123456789101112131415161718192021222324252627func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) &#123; // ä¸ç”¨åŠ dispatch_asyncï¼Œå› ä¸ºæ²¡æœ‰é˜»å¡ä¸»è¿›ç¨‹ var storedError: NSError! var downloadGroup = dispatch_group_create() for address in [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] &#123; let url = NSURL(string: address) dispatch_group_enter(downloadGroup) let photo = DownloadPhoto(url: url!) &#123; image, error in if let error = error &#123; storedError = error &#125; dispatch_group_leave(downloadGroup) &#125; PhotoManager.sharedManager.addPhoto(photo) &#125; dispatch_group_notify(downloadGroup, GlobalMainQueue) &#123; // dispatch_group_notifyå’Œdispatch_group_waitçš„åŒºåˆ«å°±æ˜¯æ˜¯å¼‚æ­¥æ‰§è¡Œé—­åŒ…çš„ï¼Œå½“dispatch groupsä¸­æ²¡æœ‰å‰©ä½™çš„ä»»åŠ¡æ—¶é—­åŒ…æ‰æ‰§è¡Œã€‚è¿™é‡Œæ˜¯æŒ‡æ˜åœ¨ä¸»é˜Ÿåˆ—ä¸­æ‰§è¡Œã€‚ if let completion = completion &#123; completion(error: storedError) &#125; &#125;&#125; ocä¾‹å­1234567891011121314151617181920212223242526272829303132//dispatch_group_notify- (void)dispatchGroupNotifyDemo &#123; dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); dispatch_group_t group = dispatch_group_create(); dispatch_group_async(group, concurrentQueue, ^&#123; NSLog(@&quot;1&quot;); &#125;); dispatch_group_async(group, concurrentQueue, ^&#123; NSLog(@&quot;2&quot;); &#125;); dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123; NSLog(@&quot;end&quot;); &#125;); NSLog(@&quot;can continue&quot;);&#125;//dispatch_group_wait- (void)dispatchGroupWaitDemo &#123; dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); dispatch_group_t group = dispatch_group_create(); //åœ¨groupä¸­æ·»åŠ é˜Ÿåˆ—çš„block dispatch_group_async(group, concurrentQueue, ^&#123; [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;1&quot;); &#125;); dispatch_group_async(group, concurrentQueue, ^&#123; NSLog(@&quot;2&quot;); &#125;); dispatch_group_wait(group, DISPATCH_TIME_FOREVER); NSLog(@&quot;can continue&quot;);&#125; å¦‚ä½•å¯¹ç°æœ‰APIä½¿ç”¨dispatch_group_t12345678910111213141516171819202122232425262728293031323334//ç»™Core Dataçš„-performBlock:æ·»åŠ groupsã€‚ç»„åˆå®Œæˆä»»åŠ¡åä½¿ç”¨dispatch_group_notifyæ¥è¿è¡Œä¸€ä¸ªblockå³å¯ã€‚- (void)withGroup:(dispatch_group_t)group performBlock:(dispatch_block_t)block&#123; if (group == NULL) &#123; [self performBlock:block]; &#125; else &#123; dispatch_group_enter(group); [self performBlock:^()&#123; block(); dispatch_group_leave(group); &#125;]; &#125;&#125;//NSURLConnectionä¹Ÿå¯ä»¥è¿™æ ·åš+ (void)withGroup:(dispatch_group_t)group sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler&#123; if (group == NULL) &#123; [self sendAsynchronousRequest:request queue:queue completionHandler:handler]; &#125; else &#123; dispatch_group_enter(group); [self sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)&#123; handler(response, data, error); dispatch_group_leave(group); &#125;]; &#125;&#125; æ³¨æ„äº‹é¡¹ dispatch_group_asyncç­‰ä»·äºdispatch_group_enter() å’Œ dispatch_group_leave()çš„ç»„åˆã€‚ dispatch_group_enter() å¿…é¡»è¿è¡Œåœ¨ dispatch_group_leave() ä¹‹å‰ã€‚ dispatch_group_enter() å’Œ dispatch_group_leave() éœ€è¦æˆå¯¹å‡ºç°çš„ Dispatch Blocké˜Ÿåˆ—æ‰§è¡Œä»»åŠ¡éƒ½æ˜¯blockçš„æ–¹å¼ï¼Œ åˆ›å»ºblock 1234567891011121314- (void)createDispatchBlock &#123; //normal way dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); dispatch_block_t block = dispatch_block_create(0, ^&#123; NSLog(@&quot;run block&quot;); &#125;); dispatch_async(concurrentQueue, block); //QOS way dispatch_block_t qosBlock = dispatch_block_create_with_qos_class(0, QOS_CLASS_USER_INITIATED, -1, ^&#123; NSLog(@&quot;run qos block&quot;); &#125;); dispatch_async(concurrentQueue, qosBlock);&#125; dispatch_block_waitï¼šå¯ä»¥æ ¹æ®dispatch blockæ¥è®¾ç½®ç­‰å¾…æ—¶é—´ï¼Œå‚æ•°DISPATCH_TIME_FOREVERä¼šä¸€ç›´ç­‰å¾…blockç»“æŸ 123456789101112- (void)dispatchBlockWaitDemo &#123; dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL); dispatch_block_t block = dispatch_block_create(0, ^&#123; NSLog(@&quot;star&quot;); [NSThread sleepForTimeInterval:5.f]; NSLog(@&quot;end&quot;); &#125;); dispatch_async(serialQueue, block); //è®¾ç½®DISPATCH_TIME_FOREVERä¼šä¸€ç›´ç­‰åˆ°å‰é¢ä»»åŠ¡éƒ½å®Œæˆ dispatch_block_wait(block, DISPATCH_TIME_FOREVER); NSLog(@&quot;ok, now can go on&quot;);&#125; dispatch_block_notifyï¼šå¯ä»¥ç›‘è§†æŒ‡å®šdispatch blockç»“æŸï¼Œç„¶åå†åŠ å…¥ä¸€ä¸ªblockåˆ°é˜Ÿåˆ—ä¸­ã€‚ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸ºï¼Œç¬¬ä¸€ä¸ªæ˜¯éœ€è¦ç›‘è§†çš„blockï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯éœ€è¦æäº¤æ‰§è¡Œçš„é˜Ÿåˆ—ï¼Œç¬¬ä¸‰ä¸ªæ˜¯å¾…åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­çš„block 1234567891011121314- (void)dispatchBlockNotifyDemo &#123; dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL); dispatch_block_t firstBlock = dispatch_block_create(0, ^&#123; NSLog(@&quot;first block start&quot;); [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;first block end&quot;); &#125;); dispatch_async(serialQueue, firstBlock); dispatch_block_t secondBlock = dispatch_block_create(0, ^&#123; NSLog(@&quot;second block run&quot;); &#125;); //first blockæ‰§è¡Œå®Œæ‰åœ¨serial queueä¸­æ‰§è¡Œsecond block dispatch_block_notify(firstBlock, serialQueue, secondBlock);&#125; dispatch_block_cancelï¼šiOS8åGCDæ”¯æŒå¯¹dispatch blockçš„å–æ¶ˆ 123456789101112131415- (void)dispatchBlockCancelDemo &#123; dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL); dispatch_block_t firstBlock = dispatch_block_create(0, ^&#123; NSLog(@&quot;first block start&quot;); [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;first block end&quot;); &#125;); dispatch_block_t secondBlock = dispatch_block_create(0, ^&#123; NSLog(@&quot;second block run&quot;); &#125;); dispatch_async(serialQueue, firstBlock); dispatch_async(serialQueue, secondBlock); //å–æ¶ˆsecondBlock dispatch_block_cancel(secondBlock);&#125; ä½¿ç”¨dispatch block objectï¼ˆè°ƒåº¦å—ï¼‰åœ¨ä»»åŠ¡æ‰§è¡Œå‰è¿›è¡Œå–æ¶ˆdispatch block objectå¯ä»¥ä¸ºé˜Ÿåˆ—ä¸­çš„å¯¹è±¡è®¾ç½®ç¤ºä¾‹ï¼Œä¸‹è½½å›¾ç‰‡ä¸­é€”è¿›è¡Œå–æ¶ˆ123456789101112131415161718192021222324252627282930313233343536373839404142func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) &#123; var storedError: NSError! let downloadGroup = dispatch_group_create() var addresses = [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] addresses += addresses + addresses // æ‰©å±•addressæ•°ç»„ï¼Œå¤åˆ¶3ä»½ var blocks: [dispatch_block_t] = [] // ä¸€ä¸ªä¿å­˜blockçš„æ•°ç»„ for i in 0 ..&lt; addresses.count &#123; dispatch_group_enter(downloadGroup) let block = dispatch_block_create(DISPATCH_BLOCK_INHERIT_QOS_CLASS) &#123; // åˆ›å»ºä¸€ä¸ªblockï¼Œblockçš„æ ‡å¿—æ˜¯DISPATCH_BLOCK_INHERIT_QOS_CLASS let index = Int(i) let address = addresses[index] let url = NSURL(string: address) let photo = DownloadPhoto(url: url!) &#123; image, error in if let error = error &#123; storedError = error &#125; dispatch_group_leave(downloadGroup) &#125; PhotoManager.sharedManager.addPhoto(photo) &#125; blocks.append(block) dispatch_async(GlobalMainQueue, block) // æŠŠè¿™ä¸ªblockæ”¾åˆ°GlobalMainQueueä¸Šå¼‚æ­¥è°ƒç”¨ã€‚å› ä¸ºå…¨å±€é˜Ÿåˆ—æ˜¯ä¸€ä¸ªé¡ºåºé˜Ÿåˆ—æ‰€ä»¥æ–¹ä¾¿å–æ¶ˆå¯¹è±¡blockï¼ŒåŒæ—¶å¯ä»¥ä¿è¯ä¸‹è½½ä»»åŠ¡åœ¨downloadPhotosWithCompletionè¿”å›åæ‰å¼€å§‹æ‰§è¡Œã€‚ &#125; for block in blocks[3 ..&lt; blocks.count] &#123; let cancel = arc4random_uniform(2) // éšæœºè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œä¼šè¿”å›0æˆ–1 if cancel == 1 &#123; dispatch_block_cancel(block) // å¦‚æœæ˜¯1å°±å–æ¶ˆblockï¼Œè¿™ä¸ªåªèƒ½å‘ç”Ÿåœ¨blockè¿˜åœ¨é˜Ÿåˆ—ä¸­å¹¶æ²¡æœ‰å¼€å§‹çš„æƒ…å†µä¸‹ã€‚å› ä¸ºæŠŠblockå·²ç»æ”¾åˆ°äº†GlobalMainQueueä¸­ï¼Œæ‰€ä»¥è¿™ä¸ªåœ°æ–¹ä¼šå…ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œäº†æ‰ä¼šæ‰§è¡Œblockã€‚ dispatch_group_leave(downloadGroup) // å› ä¸ºå·²ç»dispatch_group_enteräº†ï¼Œæ‰€ä»¥å–æ¶ˆæ—¶ä¹Ÿè¦å°†å…¶éƒ½leaveæ‰ã€‚ &#125; &#125; dispatch_group_notify(downloadGroup, GlobalMainQueue) &#123; if let completion = completion &#123; completion(error: storedError) &#125; &#125;&#125; Dispatch IO æ–‡ä»¶æ“ä½œdispatch ioè¯»å–æ–‡ä»¶çš„æ–¹å¼ç±»ä¼¼äºä¸‹é¢çš„æ–¹å¼ï¼Œå¤šä¸ªçº¿ç¨‹å»è¯»å–æ–‡ä»¶çš„åˆ‡ç‰‡æ•°æ®ï¼Œå¯¹äºå¤§çš„æ•°æ®æ–‡ä»¶è¿™æ ·ä¼šæ¯”å•çº¿ç¨‹è¦å¿«å¾ˆå¤šã€‚123dispatch_async(queue,^&#123;/*read 0-99 bytes*/&#125;);dispatch_async(queue,^&#123;/*read 100-199 bytes*/&#125;);dispatch_async(queue,^&#123;/*read 200-299 bytes*/&#125;); dispatch_io_createï¼šåˆ›å»ºdispatch io dispatch_io_set_low_waterï¼šæŒ‡å®šåˆ‡å‰²æ–‡ä»¶å¤§å° dispatch_io_readï¼šè¯»å–åˆ‡å‰²çš„æ–‡ä»¶ç„¶ååˆå¹¶ã€‚ è‹¹æœç³»ç»Ÿæ—¥å¿—APIé‡Œç”¨åˆ°äº†è¿™ä¸ªæŠ€æœ¯ï¼Œå¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ï¼šhttps://github.com/Apple-FOSS-Mirror/Libc/blob/2ca2ae74647714acfc18674c3114b1a5d3325d7d/gen/asl.c12345678910111213141516171819202122232425262728293031323334353637383940pipe_q = dispatch_queue_create(&quot;PipeQ&quot;, NULL);//åˆ›å»ºpipe_channel = dispatch_io_create(DISPATCH_IO_STREAM, fd, pipe_q, ^(int err)&#123; close(fd);&#125;);*out_fd = fdpair[1];//è®¾ç½®åˆ‡å‰²å¤§å°dispatch_io_set_low_water(pipe_channel, SIZE_MAX);dispatch_io_read(pipe_channel, 0, SIZE_MAX, pipe_q, ^(bool done, dispatch_data_t pipedata, int err)&#123; if (err == 0) &#123; size_t len = dispatch_data_get_size(pipedata); if (len &gt; 0) &#123; //å¯¹æ¯æ¬¡åˆ‡å—æ•°æ®çš„å¤„ç† const char *bytes = NULL; char *encoded; uint32_t eval; dispatch_data_t md = dispatch_data_create_map(pipedata, (const void **)&amp;bytes, &amp;len); encoded = asl_core_encode_buffer(bytes, len); asl_msg_set_key_val(aux, ASL_KEY_AUX_DATA, encoded); free(encoded); eval = _asl_evaluate_send(NULL, (aslmsg)aux, -1); _asl_send_message(NULL, eval, aux, NULL); asl_msg_release(aux); dispatch_release(md); &#125; &#125; if (done) &#123; //semaphore +1ä½¿å¾—ä¸éœ€è¦å†ç­‰å¾…ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚ dispatch_semaphore_signal(sem); dispatch_release(pipe_channel); dispatch_release(pipe_q); &#125;&#125;); Dispatch Source ç”¨GCDç›‘è§†è¿›ç¨‹Dispatch Sourceç”¨äºç›‘å¬ç³»ç»Ÿçš„åº•å±‚å¯¹è±¡ï¼Œæ¯”å¦‚æ–‡ä»¶æè¿°ç¬¦ï¼ŒMachç«¯å£ï¼Œä¿¡å·é‡ç­‰ã€‚ä¸»è¦å¤„ç†çš„äº‹ä»¶å¦‚ä¸‹è¡¨ æ–¹æ³• è¯´æ˜ DISPATCH_SOURCE_TYPE_DATA_ADD æ•°æ®å¢åŠ  DISPATCH_SOURCE_TYPE_DATA_OR æ•°æ®OR DISPATCH_SOURCE_TYPE_MACH_SEND Machç«¯å£å‘é€ DISPATCH_SOURCE_TYPE_MACH_RECV Machç«¯å£æ¥æ”¶ DISPATCH_SOURCE_TYPE_MEMORYPRESSURE å†…å­˜æƒ…å†µ DISPATCH_SOURCE_TYPE_PROC è¿›ç¨‹äº‹ä»¶ DISPATCH_SOURCE_TYPE_READ è¯»æ•°æ® DISPATCH_SOURCE_TYPE_SIGNAL ä¿¡å· DISPATCH_SOURCE_TYPE_TIMER å®šæ—¶å™¨ DISPATCH_SOURCE_TYPE_VNODE æ–‡ä»¶ç³»ç»Ÿå˜åŒ– DISPATCH_SOURCE_TYPE_WRITE æ–‡ä»¶å†™å…¥ æ–¹æ³• dispatch_source_createï¼šåˆ›å»ºdispatch sourceï¼Œåˆ›å»ºåä¼šå¤„äºæŒ‚èµ·çŠ¶æ€è¿›è¡Œäº‹ä»¶æ¥æ”¶ï¼Œéœ€è¦è®¾ç½®äº‹ä»¶å¤„ç†handlerè¿›è¡Œäº‹ä»¶å¤„ç†ã€‚ dispatch_source_set_event_handlerï¼šè®¾ç½®äº‹ä»¶å¤„ç†handler dispatch_source_set_cancel_handlerï¼šäº‹ä»¶å–æ¶ˆhandlerï¼Œå°±æ˜¯åœ¨dispatch sourceé‡Šæ”¾å‰åšäº›æ¸…ç†çš„äº‹ã€‚ dispatch_source_cancelï¼šå…³é—­dispatch sourceï¼Œè®¾ç½®çš„äº‹ä»¶å¤„ç†handlerä¸ä¼šè¢«æ‰§è¡Œï¼Œå·²ç»æ‰§è¡Œçš„äº‹ä»¶handlerä¸ä¼šå–æ¶ˆã€‚ 1234567891011NSRunningApplication *mail = [NSRunningApplication runningApplicationsWithBundleIdentifier:@&quot;com.apple.mail&quot;];if (mail == nil) &#123; return;&#125;pid_t const pid = mail.processIdentifier;self.source = dispatch_source_create(DISPATCH_SOURCE_TYPE_PROC, pid, DISPATCH_PROC_EXIT, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(self.source, ^()&#123; NSLog(@&quot;Mail quit.&quot;);&#125;);//åœ¨äº‹ä»¶æºä¼ åˆ°ä½ çš„äº‹ä»¶å¤„ç†å‰éœ€è¦è°ƒç”¨dispatch_resume()è¿™ä¸ªæ–¹æ³•dispatch_resume(self.source); ç›‘è§†æ–‡ä»¶å¤¹å†…æ–‡ä»¶å˜åŒ–12345678910111213141516171819202122232425NSURL *directoryURL; // assume this is set to a directoryint const fd = open([[directoryURL path] fileSystemRepresentation], O_EVTONLY);if (fd &lt; 0) &#123; char buffer[80]; strerror_r(errno, buffer, sizeof(buffer)); NSLog(@&quot;Unable to open \\&quot;%@\\&quot;: %s (%d)&quot;, [directoryURL path], buffer, errno); return;&#125;dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE, fd,DISPATCH_VNODE_WRITE | DISPATCH_VNODE_DELETE, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(source, ^()&#123; unsigned long const data = dispatch_source_get_data(source); if (data &amp; DISPATCH_VNODE_WRITE) &#123; NSLog(@&quot;The directory changed.&quot;); &#125; if (data &amp; DISPATCH_VNODE_DELETE) &#123; NSLog(@&quot;The directory has been deleted.&quot;); &#125;&#125;);dispatch_source_set_cancel_handler(source, ^()&#123; close(fd);&#125;);self.source = source;dispatch_resume(self.source);//è¿˜è¦æ³¨æ„éœ€è¦ç”¨DISPATCH_VNODE_DELETE å»æ£€æŸ¥ç›‘è§†çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦è¢«åˆ é™¤ï¼Œå¦‚æœåˆ é™¤äº†å°±åœæ­¢ç›‘å¬ NSTimeråœ¨ä¸»çº¿ç¨‹çš„runloopé‡Œä¼šåœ¨runloopåˆ‡æ¢å…¶å®ƒæ¨¡å¼æ—¶åœæ­¢ï¼Œè¿™æ—¶å°±éœ€è¦æ‰‹åŠ¨åœ¨å­çº¿ç¨‹å¼€å¯ä¸€ä¸ªæ¨¡å¼ä¸ºNSRunLoopCommonModesçš„runloopï¼Œå¦‚æœä¸æƒ³å¼€å¯ä¸€ä¸ªæ–°çš„runloopå¯ä»¥ç”¨ä¸è·Ÿrunloopå…³è”çš„dispatch source timerï¼Œå¦‚ä¸‹ã€‚12345678dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,0, 0, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(source, ^()&#123; NSLog(@&quot;Time flies.&quot;);&#125;);dispatch_time_t startdispatch_source_set_timer(source, DISPATCH_TIME_NOW, 5ull * NSEC_PER_SEC,100ull * NSEC_PER_MSEC);self.source = source;dispatch_resume(self.source); Dispatch Semaphoreå’Œçš„ä»‹ç»å¦å¤–ä¸€ç§ä¿è¯åŒæ­¥çš„æ–¹æ³•ã€‚ä½¿ç”¨dispatch_semaphore_signalåŠ 1dispatch_semaphore_waitå‡1ï¼Œä¸º0æ—¶ç­‰å¾…çš„è®¾ç½®æ–¹å¼æ¥è¾¾åˆ°çº¿ç¨‹åŒæ­¥çš„ç›®çš„å’ŒåŒæ­¥é”ä¸€æ ·èƒ½å¤Ÿè§£å†³èµ„æºæŠ¢å çš„é—®é¢˜ã€‚12345678910111213//dispatch semaphore- (void)dispatchSemaphoreDemo &#123; //åˆ›å»ºsemaphore dispatch_semaphore_t semaphore = dispatch_semaphore_create(0); dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; NSLog(@&quot;start&quot;); [NSThread sleepForTimeInterval:1.f]; NSLog(@&quot;semaphore +1&quot;); dispatch_semaphore_signal(semaphore); //+1 semaphore &#125;); dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); NSLog(@&quot;continue&quot;);&#125; é”è¿™é‡Œç®€å•ä»‹ç»ä¸‹iOSä¸­å¸¸ç”¨çš„å„ç§é”å’Œä»–ä»¬çš„æ€§èƒ½ã€‚ NSRecursiveLockï¼šé€’å½’é”ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­åå¤è·å–é”ä¸ä¼šé€ æˆæ­»é”ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šè®°å½•è·å–é”å’Œé‡Šæ”¾é”çš„æ¬¡æ•°æ¥è¾¾åˆ°ä½•æ—¶é‡Šæ”¾çš„ä½œç”¨ã€‚ NSDistributedLockï¼šåˆ†å¸ƒé”ï¼ŒåŸºäºæ–‡ä»¶æ–¹å¼çš„é”æœºåˆ¶ï¼Œå¯ä»¥è·¨è¿›ç¨‹è®¿é—®ã€‚ NSConditionLockï¼šæ¡ä»¶é”ï¼Œç”¨æˆ·å®šä¹‰æ¡ä»¶ï¼Œç¡®ä¿ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å–æ»¡è¶³ä¸€å®šæ¡ä»¶çš„é”ã€‚å› ä¸ºçº¿ç¨‹é—´ç«äº‰ä¼šæ¶‰åŠåˆ°æ¡ä»¶é”æ£€æµ‹ï¼Œç³»ç»Ÿè°ƒç”¨ä¸Šä¸‹åˆ‡æ¢é¢‘ç¹å¯¼è‡´è€—æ—¶æ˜¯å‡ ä¸ªé”é‡Œæœ€é•¿çš„ã€‚ OSSpinLockï¼šè‡ªæ—‹é”ï¼Œä¸è¿›å…¥å†…æ ¸ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ€§èƒ½æœ€é«˜ï¼Œä½†æŠ¢å å¤šæ—¶ä¼šå ç”¨è¾ƒå¤šcpuï¼Œå¥½ç‚¹å¤šï¼Œè¿™æ—¶ä½¿ç”¨pthread_mutexè¾ƒå¥½ã€‚ pthread_mutex_tï¼šåŒæ­¥é”åŸºäºCè¯­è¨€ï¼Œåº•å±‚apiæ€§èƒ½é«˜ï¼Œä½¿ç”¨æ–¹æ³•å’Œå…¶å®ƒçš„ç±»ä¼¼ã€‚ @synchronizedï¼šæ›´åŠ ç®€å•ã€‚ dispatch_suspendå’Œdispatch_resumeæŒ‚èµ·å’Œæ¢å¤é˜Ÿåˆ—dispatch_suspendè¿™é‡ŒæŒ‚èµ·ä¸ä¼šæš‚åœæ­£åœ¨æ‰§è¡Œçš„blockï¼Œåªæ˜¯èƒ½å¤Ÿæš‚åœè¿˜æ²¡æ‰§è¡Œçš„blockã€‚ dispatch_set_contextå’Œdispatch_get_contextGCDæ·±å…¥æ“ä½œ ç¼“å†²åŒºï¼šdispatch_data_tåŸºäºé›¶ç¢çš„å†…å­˜åŒºåŸŸï¼Œä½¿ç”¨dispatch_data_applyæ¥éå†ï¼Œè¿˜å¯ä»¥ç”¨dispatch_data_create_subrangeæ¥åˆ›å»ºä¸€ä¸ªä¸åšä»»ä½•æ‹·è´çš„å­åŒºåŸŸ I/Oè°ƒåº¦ï¼šä½¿ç”¨GCDæä¾›çš„dispatch_io_readï¼Œdispatch_io_writeå’Œdispatch_io_close æµ‹è¯•ï¼šä½¿ç”¨dispatch_benchmarkå°å·¥å…· åŸå­æ“ä½œï¼š libkern/OSAtomic.hé‡Œå¯ä»¥æŸ¥çœ‹é‚£äº›å‡½æ•°ï¼Œç”¨äºåº•å±‚å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚ GCDæ­»é”å½“å‰ä¸²è¡Œé˜Ÿåˆ—é‡Œé¢åŒæ­¥æ‰§è¡Œå½“å‰ä¸²è¡Œé˜Ÿåˆ—å°±ä¼šæ­»é”ï¼Œè§£å†³çš„æ–¹æ³•å°±æ˜¯å°†åŒæ­¥çš„ä¸²è¡Œé˜Ÿåˆ—æ”¾åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹å°±èƒ½å¤Ÿè§£å†³ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556- (void)deadLockCase1 &#123; NSLog(@&quot;1&quot;); //ä¸»é˜Ÿåˆ—çš„åŒæ­¥çº¿ç¨‹ï¼ŒæŒ‰ç…§FIFOçš„åŸåˆ™ï¼ˆå…ˆå…¥å…ˆå‡ºï¼‰ï¼Œ2æ’åœ¨3åé¢ä¼šç­‰3æ‰§è¡Œå®Œï¼Œä½†å› ä¸ºåŒæ­¥çº¿ç¨‹ï¼Œ3åˆè¦ç­‰2æ‰§è¡Œå®Œï¼Œç›¸äº’ç­‰å¾…æˆä¸ºæ­»é”ã€‚ dispatch_sync(dispatch_get_main_queue(), ^&#123; NSLog(@&quot;2&quot;); &#125;); NSLog(@&quot;3&quot;);&#125;- (void)deadLockCase2 &#123; NSLog(@&quot;1&quot;); //3ä¼šç­‰2ï¼Œå› ä¸º2åœ¨å…¨å±€å¹¶è¡Œé˜Ÿåˆ—é‡Œï¼Œä¸éœ€è¦ç­‰å¾…3ï¼Œè¿™æ ·2æ‰§è¡Œå®Œå›åˆ°ä¸»é˜Ÿåˆ—ï¼Œ3å°±å¼€å§‹æ‰§è¡Œ dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^&#123; NSLog(@&quot;2&quot;); &#125;); NSLog(@&quot;3&quot;);&#125;- (void)deadLockCase3 &#123; dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL); NSLog(@&quot;1&quot;); dispatch_async(serialQueue, ^&#123; NSLog(@&quot;2&quot;); //ä¸²è¡Œé˜Ÿåˆ—é‡Œé¢åŒæ­¥ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—å°±ä¼šæ­»é” dispatch_sync(serialQueue, ^&#123; NSLog(@&quot;3&quot;); &#125;); NSLog(@&quot;4&quot;); &#125;); NSLog(@&quot;5&quot;);&#125;- (void)deadLockCase4 &#123; NSLog(@&quot;1&quot;); dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; NSLog(@&quot;2&quot;); //å°†åŒæ­¥çš„ä¸²è¡Œé˜Ÿåˆ—æ”¾åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹å°±èƒ½å¤Ÿè§£å†³ dispatch_sync(dispatch_get_main_queue(), ^&#123; NSLog(@&quot;3&quot;); &#125;); NSLog(@&quot;4&quot;); &#125;); NSLog(@&quot;5&quot;);&#125;- (void)deadLockCase5 &#123; dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; NSLog(@&quot;1&quot;); //å›åˆ°ä¸»çº¿ç¨‹å‘ç°æ­»å¾ªç¯åé¢å°±æ²¡æ³•æ‰§è¡Œäº† dispatch_sync(dispatch_get_main_queue(), ^&#123; NSLog(@&quot;2&quot;); &#125;); NSLog(@&quot;3&quot;); &#125;); NSLog(@&quot;4&quot;); //æ­»å¾ªç¯ while (1) &#123; // &#125;&#125; GCDå®é™…ä½¿ç”¨FMDBå¦‚ä½•ä½¿ç”¨dispatch_queue_set_specificå’Œdispatch_get_specificæ¥é˜²æ­¢æ­»é”ä½œç”¨ç±»ä¼¼objc_setAssociatedObjectè·Ÿobjc_getAssociatedObject1234567891011static const void * const kDispatchQueueSpecificKey = &amp;kDispatchQueueSpecificKey;//åˆ›å»ºä¸²è¡Œé˜Ÿåˆ—ï¼Œæ‰€æœ‰æ•°æ®åº“çš„æ“ä½œéƒ½åœ¨è¿™ä¸ªé˜Ÿåˆ—é‡Œ_queue = dispatch_queue_create([[NSString stringWithFormat:@&quot;fmdb.%@&quot;, self] UTF8String], NULL);//æ ‡è®°é˜Ÿåˆ—dispatch_queue_set_specific(_queue, kDispatchQueueSpecificKey, (__bridge void *)self, NULL);//æ£€æŸ¥æ˜¯å¦æ˜¯åŒä¸€ä¸ªé˜Ÿåˆ—æ¥é¿å…æ­»é”çš„æ–¹æ³•- (void)inDatabase:(void (^)(FMDatabase *db))block &#123; FMDatabaseQueue *currentSyncQueue = (__bridge id)dispatch_get_specific(kDispatchQueueSpecificKey); assert(currentSyncQueue != self &amp;&amp; &quot;inDatabase: was called reentrantly on the same queue, which would lead to a deadlock&quot;);&#125; iOSç³»ç»Ÿç‰ˆæœ¬æ–°ç‰¹æ€§iOS8iOS8æ–°åŠ äº†ä¸€ä¸ªåŠŸèƒ½å«Quality of Service(QoS)ï¼Œé‡Œé¢æä¾›äº†ä¸€ä¸‹å‡ ä¸ªæ›´å®¹æ˜“ç†è§£çš„æšä¸¾åæ¥ä½¿ç”¨user interactiveï¼Œuser initiatedï¼Œutilityå’Œbackgroundã€‚ä¸‹é¢çš„è¡¨åšäº†å¯¹æ¯” Global queue Corresponding QoS class è¯´æ˜ Main thread NSQualityOfServiceUserInteractive UIç›¸å…³ï¼Œäº¤äº’ç­‰ DISPATCH_QUEUE_PRIORITY_HIGH NSQualityOfServiceUserInitiated ç”¨æˆ·å‘èµ·éœ€è¦é©¬ä¸Šå¾—åˆ°ç»“æœè¿›è¡Œåç»­ä»»åŠ¡ DISPATCH_QUEUE_PRIORITY_DEFAULT NSQualityOfServiceDefault é»˜è®¤çš„ä¸åº”è¯¥ä½¿ç”¨è¿™ä¸ªè®¾ç½®ä»»åŠ¡ DISPATCH_QUEUE_PRIORITY_LOW NSQualityOfServiceUtility èŠ±è´¹æ—¶é—´ç¨å¤šæ¯”å¦‚ä¸‹è½½ï¼Œéœ€è¦å‡ ç§’æˆ–å‡ åˆ†é’Ÿçš„ DISPATCH_QUEUE_PRIORITY_BACKGROUND NSQualityOfServiceBackground ä¸å¯è§åœ¨åå°çš„æ“ä½œå¯èƒ½éœ€è¦å¥½å‡ åˆ†é’Ÿç”šè‡³å‡ å°æ—¶çš„ å‚è€ƒèµ„æ–™WWDC Building Responsive and Efficient Apps with GCDï¼šhttps://developer.apple.com/videos/play/wwdc2015-718/ æ–‡æ¡£ å®˜æ–¹æ–‡æ¡£ï¼šhttps://developer.apple.com/library/prerelease/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/","categories":[],"tags":[{"name":"è½¬è½½","slug":"è½¬è½½","permalink":"http://www.zhimakaiyuan.com/tags/è½¬è½½/"},{"name":"iOS","slug":"iOS","permalink":"http://www.zhimakaiyuan.com/tags/iOS/"},{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"http://www.zhimakaiyuan.com/tags/ç¬”è®°/"}]},{"title":"ç”¨Let's encrypt å…è´¹ç»™è‡ªå·±çš„åšå®¢åŠ ä¸Šhttpsä¹‹å°ç™½ç‰ˆ","slug":"https-for-lets-encrypt","date":"2016-12-17T05:47:56.000Z","updated":"2016-12-17T05:50:33.000Z","comments":true,"path":"2016/12/17/https-for-lets-encrypt/","link":"","permalink":"http://www.zhimakaiyuan.com/2016/12/17/https-for-lets-encrypt/","excerpt":"æœ€è¿‘å…¬å¸ä»»åŠ¡ä¸æ˜¯å¾ˆé‡ï¼Œé€‚é…iOS 10 ATS å·²ç»æˆä¸ºäº†é¡¹ç›®è¿™ä¸€ä¸ªæœˆçš„ä»»åŠ¡ï¼Œæ¨è€å¤§è´Ÿè´£ä»»çš„æŠŠè¿™ä¸ªé‡æ‹…ä¸€ä¸ªäººæ‰›ä¸‹äº†ï¼Œå› æ­¤æˆ‘ç­‰å°æ°‘å°±åªèƒ½è‡ªå·±å»ç ”ç©¶äº†ï¼Œäºæ˜¯å°±å¯»æ€ç€ç»™è‡ªå·±çš„åšå®¢åŠ ä¸ŠssléªŒè¯ï¼Œæœ‰ä¸ªå°ç»¿é”ğŸ”’ çœ‹èµ·æ¥ç¡®å®æ˜¯èˆ’å¦å¾ˆå¤šã€‚åœ¨è¿™é‡Œå°±è®°å½•ä¸‹å…¨è¿‡ç¨‹ã€‚","text":"æœ€è¿‘å…¬å¸ä»»åŠ¡ä¸æ˜¯å¾ˆé‡ï¼Œé€‚é…iOS 10 ATS å·²ç»æˆä¸ºäº†é¡¹ç›®è¿™ä¸€ä¸ªæœˆçš„ä»»åŠ¡ï¼Œæ¨è€å¤§è´Ÿè´£ä»»çš„æŠŠè¿™ä¸ªé‡æ‹…ä¸€ä¸ªäººæ‰›ä¸‹äº†ï¼Œå› æ­¤æˆ‘ç­‰å°æ°‘å°±åªèƒ½è‡ªå·±å»ç ”ç©¶äº†ï¼Œäºæ˜¯å°±å¯»æ€ç€ç»™è‡ªå·±çš„åšå®¢åŠ ä¸ŠssléªŒè¯ï¼Œæœ‰ä¸ªå°ç»¿é”ğŸ”’ çœ‹èµ·æ¥ç¡®å®æ˜¯èˆ’å¦å¾ˆå¤šã€‚åœ¨è¿™é‡Œå°±è®°å½•ä¸‹å…¨è¿‡ç¨‹ã€‚ å‰è¨€HTTPSç›®å‰å·²ç»æˆä¸ºå„å¤§ä¸»æµç½‘ç«™çš„æ ‡é…ï¼Œæœªæ¥å¿…å°†æˆä¸ºä¸€ç§è¶‹åŠ¿ï¼Œå¾ˆå¤šä¸ªäººåšå®¢ç°åœ¨ä¹Ÿéƒ½åŠ å…¥äº†HTTPSçš„é˜µè¥ã€‚HTTPSå¥½å¤„å¤šå¤šï¼Œå¯ä»¥é˜²æ­¢å„ç§æ”»å‡»åŠ«æŒï¼Œè¿è¥å•†å¹¿å‘Šæ¤å…¥ï¼Œå®¢æˆ·ä¼ è¾“ä¿¡æ¯æ³„éœ²ç­‰é—®é¢˜ã€‚ä¸ºäº†è®©HTTPSèƒ½å¤Ÿå…¨é¢æ™®åŠï¼ŒLetâ€™s Encrypté¡¹ç›®åº”è¿è€Œç”Ÿï¼Œå®ƒç”±äº’è”ç½‘å®‰å…¨ç ”ç©¶å°ç»„ISRGï¼ˆInternet Security Research Groupï¼‰æä¾›æœåŠ¡ï¼ŒISRGæ˜¯æ¥è‡ªç¾å›½åŠ åˆ©ç¦å°¼äºšå·çš„ä¸€ä¸ªå…¬ç›Šç»„ç»‡ã€‚Letâ€™s Encrypt å¾—åˆ°äº† Mozillaã€Ciscoå’Œ Chrome ç­‰ä¼—å¤šå…¬å¸å’Œæœºæ„çš„æ”¯æŒã€‚ å…³äºLetâ€™s EncryotLetâ€™s Encrypt æ˜¯ä¸€ä¸ªæ–°çš„ CAï¼Œä»–èƒ½å¤Ÿæä¾›ä¸€ç§éå¸¸å®¹æ˜“çš„æ–¹å¼æ¥è·å–å’Œå®‰è£…å…è´¹çš„ TLS/SSL è¯ä¹¦ï¼Œä»è€Œåœ¨ web æœåŠ¡å™¨ä¸Šå¯ç”¨ HTTPS åŠ å¯†ã€‚ä»–é€šè¿‡æä¾›è½¯ä»¶å®¢æˆ·ç«¯ letsencrypt æ¥ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼Œå®ƒä¼å›¾è‡ªåŠ¨å®Œæˆå¤§éƒ¨åˆ†æ‰€éœ€çš„å¿…è¦æ­¥éª¤ã€‚å½“å‰ï¼ŒLetâ€™s Encrypt ä»ç„¶å¤„åœ¨å…¬å¼€æµ‹è¯•é˜¶æ®µï¼Œä»–æ•´ä¸ªè·å–å’Œå®‰è£…è¯ä¹¦çš„æµç¨‹åªåœ¨ Apache æœåŠ¡å™¨ä¸Šå®ç°äº†å…¨éƒ¨è‡ªåŠ¨åŒ–ã€‚ç„¶è€Œ Letâ€™s Encrypt ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨å…¶ä»–ä¸åŒçš„æœåŠ¡å™¨ä¸Šè·å–å’Œå®‰è£…å…è´¹çš„ SSL è¯ä¹¦ã€‚ ç”³è¯· Letâ€™s Encrypt è¯ä¹¦ä¸ä»…å…è´¹ã€ä»£ç å¼€æºï¼Œè€Œä¸”é…ç½®ç®€å•ï¼Œä¸è¿‡æ¯æ¬¡ç”³è¯·åªæœ‰90å¤©çš„æœ‰æ•ˆæœŸï¼Œä½†å¯ä»¥é€šè¿‡è„šæœ¬å®šæœŸæ›´æ–°ï¼Œé…ç½®å¥½ä¹‹åä¸€åŠ³æ°¸é€¸ã€‚ ä¸‹é¢å°±å¼€å§‹æ¥ä¸€èµ·çœ‹çœ‹å§ï½ ç¬¬ä¸€æ­¥ï¼šåˆ›å»º LETâ€™S ENCRYPT è´¦å·ï¼ˆå¦‚ä½•ä½ æ²¡æœ‰çš„è¯),å¹¶ç”ŸæˆCSRæ–‡ä»¶ä¸ºäº†åŒºåˆ†å…¶ä»–ï¼Œæˆ‘ä»¬ç°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å•ç‹¬å­˜æ”¾è´¦å·ã€è¯ä¹¦å’Œkey 12mkdir sslcd ssl Letâ€™s Encryptä½¿ç”¨ä¸€ä¸ªç§é’¥æ¥è¿›è¡Œè´¦å·çš„åˆ›å»ºä¸ç™»é™†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨opensslåˆ›å»ºä¸€ä¸ªaccount.keyã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦çœ‹ä¸‹æˆ‘ä»¬çš„opensslçš„å®‰è£…ç›®å½•ï¼Œå¹¶è®°å½•ä¸‹openssl.cnf æ–‡ä»¶çš„åœ°å€ã€‚ 1openssl version â€“a ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å½“å‡ºopensslçš„å®‰è£…è·¯å¾„ 123456OpenSSL 1.0.2g 1 Mar 2016built on: reproducible build, date unspecifiedplatform: debian-amd64options: bn(64,64) rc4(16x,int) des(idx,cisc,16,int) blowfish(idx) compiler: cc -I. -I.. -I../include -fPIC -DOPENSSL_PIC -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m64 -DL_ENDIAN -g -O2 -fdebug-prefix-map=/build/openssl-wIGtVG/openssl-1.0.2g=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -Wl,-Bsymbolic-functions -Wl,-z,relro -Wa,--noexecstack -Wall -DMD32_REG_T=int -DOPENSSL_IA32_SSE2 -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_MONT5 -DOPENSSL_BN_ASM_GF2m -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DVPAES_ASM -DBSAES_ASM -DWHIRLPOOL_ASM -DGHASH_ASM -DECP_NISTZ256_ASMOPENSSLDIR: \"/usr/lib/ssl\" //è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„opensslçš„è·¯å¾„äº† è¿™ä¸€æ­¥å®Œæˆåï¼Œæˆ‘ä»¬å¼€å§‹æˆ‘ä»¬çš„ç¬¬ä¸€æ­¥ åˆ›å»ºLetâ€™s Encryptç§é’¥é¦–å…ˆè¿›å…¥æˆ‘ä»¬åˆšåˆšçš„ssl æ–‡ä»¶å¤¹ï¼Œç„¶åç”Ÿæˆç§é’¥12cd sslopenssl genrsa 4096 &gt; account.key åˆ›å»ºCSR(Certificate Signing Requestï¼Œè¯ä¹¦ç­¾åè¯·æ±‚) æ–‡ä»¶ ACMEåè®® (Letâ€™s Encryptæ‰€ä½¿ç”¨çš„) éœ€è¦ä¸€ä¸ªcsræ–‡ä»¶ï¼Œç”¨æ¥è¿›è¡Œè¯ä¹¦ç­¾åå’Œè¯ä¹¦æ›´æ–°ã€‚ å°†éœ€è¦åŠ å¯†çš„åŸŸååŠ åˆ°ä¸‹é¢çš„ä»£ç ä¸­ï¼Œç›®å‰ä¸€å¼ è¯ä¹¦æœ€å¤šå¯ä»¥åŠ å¯† 100 ä¸ªåŸŸåï¼Œæ³¨æ„å‘½ä»¤è¡Œä¸­çš„åŸŸåæ¢æˆä½ è‡ªå·±çš„åŸŸåï¼š 123openssl genrsa 4096 &gt; domain.keyopenssl req -new -sha256 -key domain.key -subj \"/\" -reqexts SAN -config &lt;(cat /usr/lib/ssl/openssl.cnf &lt;(printf \"[SAN]\\nsubjectAltName=DNS:yoursite.com,DNS:www.yoursite.com\")) &gt; domain.csr æ³¨æ„ï¼šopenssl.cnf æ–‡ä»¶çš„ä½ç½®å¯èƒ½ä¼šå› ä¸ºlinuxç‰ˆæœ¬çš„ä¸åŒè€Œæœ‰å˜ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ä¸Šä¸€æ­¥ä¸­çš„openssl è·¯å¾„åé¢åŠ ä¸Š/openssl.cnf ç°åœ¨æˆ‘ä»¬å·²ç»ç”Ÿæˆäº†csrå’Œç§é’¥ï¼Œæ¥ä¸‹æ¥å°±åˆ°äº†æ¯”è¾ƒçº ç»“çš„ä¸€æ­¥äº†ï¼Œéœ€è¦è¯æ˜ä½ æ‹¥æœ‰è¯¥åŸŸå é…ç½®åŸŸåéªŒè¯CA åœ¨ç­¾å‘ DVï¼ˆDomain Validationï¼‰è¯ä¹¦æ—¶ï¼Œéœ€è¦éªŒè¯åŸŸåæ‰€æœ‰æƒã€‚ä¼ ç»Ÿ CA çš„éªŒè¯æ–¹å¼ä¸€èˆ¬æ˜¯å¾€ admin@youmail.com å‘éªŒè¯é‚®ä»¶ï¼Œè€Œ Letâ€™s Encrypt æ˜¯åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šç”Ÿæˆä¸€ä¸ªéšæœºéªŒè¯æ–‡ä»¶ï¼Œå†é€šè¿‡åˆ›å»º CSR æ—¶æŒ‡å®šçš„åŸŸåè®¿é—®ï¼Œå¦‚æœå¯ä»¥è®¿é—®åˆ™è¡¨æ˜ä½ å¯¹è¿™ä¸ªåŸŸåæœ‰æ§åˆ¶æƒã€‚ é¦–å…ˆåˆ›å»ºç”¨äºå­˜æ”¾éªŒè¯æ–‡ä»¶çš„ç›®å½•ï¼Œç„¶åé€šè¿‡ â€œ.well-known/acme-challenge/â€œ è¿™ä¸ªURLæ¥è®¿é—®åˆ°éªŒè¯æ–‡ä»¶. æ³¨æ„: Letâ€™s Encrypt ä¼šå¯¹ä½ çš„æœåŠ¡å™¨åšä¸€æ¬¡httpè¯·æ±‚æ¥è¿›è¡ŒéªŒè¯ï¼Œå› æ­¤ä½ éœ€è¦ä¿è¯80ç«¯å£èƒ½å¤Ÿè®¿é—®ï¼š 1mkdir -p /var/www/challenges ç„¶åé…ç½®ä¸€ä¸ª HTTP æœåŠ¡ï¼Œä»¥ Nginx ä¸ºä¾‹ï¼š(æ³¨æ„ï¼šè¿™é‡Œçš„ç«¯å£æ˜¯80ï¼Œä¸æ˜¯443ï¼‰ 1234567891011121314151617//è¿™ä¸ªæ˜¯æ–°å¢åŠ çš„ä¸€ä¸ªservrserver &#123;listen 80;server_name yoursite.com www.yoursite.com;if ( $request_uri !~ \"/.well-known/acme-challenge/*\" ) &#123; # è®© Let's Encrypt æˆåŠŸè®¿é—®åˆ°éªŒè¯æ–‡ä»¶ä¸å— 301 å½±å“return 301 https://yoursite.com$request_uri; # æ³¨æ„è¿›è¡Œ301é‡å®šå‘åˆ°httpsï¼Œå¦åˆ™é€šè¿‡httpä»èƒ½è®¿é—®ä½ çš„ç«™ç‚¹&#125;location /.well-known/acme-challenge/ &#123;alias /var/www/challenges/;try_files $uri =404;&#125;#...ä½ çš„å…¶ä»–é…ç½®&#125; è¿™ä¸ªéªŒè¯æœåŠ¡ä»¥åæ›´æ–°è¯ä¹¦è¿˜è¦ç”¨åˆ°ï¼Œéœ€è¦ä¸€ç›´ä¿ç•™ã€‚ è·å–ç½‘ç«™è¯ä¹¦å…ˆå›åˆ°æˆ‘ä»¬çš„sslç›®å½•ï¼Œç„¶åæŠŠ acme-tiny è„šæœ¬ä¿å­˜åˆ° ssl ç›®å½• 12345cdcd sslwget https://raw.githubusercontent.com/diafygi/acme-tiny/master/acme_tiny.pysudo chmod +x acme_tiny.py python acme_tiny.py --account-key ./account.key --csr ./domain.csr --acme-dir /var/www/challenges/ &gt; ./signed.crt å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå½“å‰ç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€ä¸ª signed.crtï¼Œè¿™å°±æ˜¯ç”³è¯·å¥½çš„è¯ä¹¦æ–‡ä»¶ã€‚ å®‰è£…è¯ä¹¦è¯ä¹¦ç”Ÿæˆåï¼Œå°±å¯ä»¥æŠŠå®ƒé…ç½®åœ¨web æœåŠ¡å™¨ä¸Šäº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒNginxéœ€è¦è¿½åŠ ä¸€ä¸ªLetâ€™s Encryptçš„ä¸­é—´è¯ä¹¦ï¼Œåœ¨ Nginx é…ç½®ä¸­ï¼Œéœ€è¦æŠŠä¸­é—´è¯ä¹¦å’Œç½‘ç«™è¯ä¹¦åˆåœ¨ä¸€èµ·ï¼š``wget -O - https://letsencrypt.org/certs/lets-encrypt-x3-cross-signed.pem &gt; intermediate.pemcat signed.crt intermediate.pem &gt; chained.pem 123æœ€ç»ˆï¼Œä¿®æ”¹ Nginx ä¸­æœ‰å…³è¯ä¹¦çš„é…ç½®å¹¶ reload æœåŠ¡å³å¯ï¼š## ä¿®æ”¹ Nginx ä¸­æœ‰å…³è¯ä¹¦çš„é…ç½®å¹¶ reload æœåŠ¡ server {listen 443;server_name yoursite.com, www.yoursite.com; ssl on;ssl_certificate /path/to/chained.pem;ssl_certificate_key /path/to/domain.key;ssl_session_timeout 5m;ssl_protocols TLSv1 TLSv1.1 TLSv1.2;ssl_ciphers ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA;ssl_session_cache shared:SSL:50m;ssl_prefer_server_ciphers on; #â€¦ä½ çš„å…¶ä»–é…ç½®} server { listen 80;server_name yoursite.com www.yoursite.com; if ( $request_uri !~ â€œ/.well-known/acme-challenge/*â€ ) { # è®© Letâ€™s Encrypt æˆåŠŸè®¿é—®åˆ°éªŒè¯æ–‡ä»¶ä¸å— 301 å½±å“return 301 https://yoursite.com$request_uri; # æ³¨æ„è¿›è¡Œ301é‡å®šå‘åˆ°httpsï¼Œå¦åˆ™é€šè¿‡httpä»èƒ½è®¿é—®ä½ çš„ç«™ç‚¹} location /.well-known/acme-challenge/ {alias /var/www/challenges/;try_files $uri =404;} #â€¦ä½ çš„å…¶ä»–é…ç½®} å¤§åŠŸå‘Šæˆå¥½äº†ï¼Œç°åœ¨å°±èƒ½é‡å¯ä½ çš„nginx1nginx -s reload åç»­æ­å–œï¼ä½ çš„ç½‘ç«™å·²ç»ä½¿ç”¨ä¸Šäº†HTTPSã€‚ ä½†Letâ€™s Encrypt è¯ä¹¦æœ‰æ•ˆæœŸåªæœ‰90å¤©, æ‰€ä»¥éœ€è¦å®šæœŸæ›´æ–°ã€‚ç°åœ¨åªéœ€è¦å†™ä¸€ä¸ªæ›´æ–°è„šæœ¬å¹¶æŠŠå®ƒæ”¾åˆ°å®šæ—¶ä»»åŠ¡ä¸­å³å¯ã€‚ åœ¨sslçš„æ–‡ä»¶å¤¹å†…è¿›è¡Œå¦‚ä¸‹æ“ä½œ1234cdcd ssltouch renew_cert.shvi renew_cert.sh ç„¶ååœ¨renew_cert.shä¸­è¾“å…¥12345#!/usr/bin/shpython /root/ssl/acme_tiny.py --account-key /root/ssl/account.key --csr /root/ssl/domain.csr --acme-dir /var/www/challenges/ &gt; /tmp/signed.crt || exitwget -O - https://letsencrypt.org/certs/lets-encrypt-x3-cross-signed.pem &gt; intermediate.pemcat /tmp/signed.crt intermediate.pem &gt; /root/ssl/chained.pemservice nginx reload å®šæ—¶ä»»åŠ¡å¯ä»¥è®¾ç½®ä¸ºæ¯ä¸ªæœˆæ‰§è¡Œä¸€æ¬¡ï¼š10 0 1 * * /root/ssl/acme-tiny/renew_cert.sh 2&gt;&gt; /var/log/acme_tine.log ä»¥ä¸Šå°±æ˜¯æ•´ä¸ªçš„å…¨è¿‡ç¨‹äº†ã€‚æ¬¢è¿äº«å—HTTPSä¹‹æ—…ï½","categories":[],"tags":[{"name":"https","slug":"https","permalink":"http://www.zhimakaiyuan.com/tags/https/"},{"name":"çæŠ˜è…¾","slug":"çæŠ˜è…¾","permalink":"http://www.zhimakaiyuan.com/tags/çæŠ˜è…¾/"}]},{"title":"Xcode8åœ¨Objective-Cä¸­é›†æˆCharts 3.0ï¼ˆå…¨æ˜¯å‘ï¼ï¼ï¼ï¼‰","slug":"Xcode8-Uses-Charts-Objective-C","date":"2016-12-06T09:04:26.000Z","updated":"2016-12-16T08:08:21.000Z","comments":true,"path":"2016/12/06/Xcode8-Uses-Charts-Objective-C/","link":"","permalink":"http://www.zhimakaiyuan.com/2016/12/06/Xcode8-Uses-Charts-Objective-C/","excerpt":"ç”¨cocoapodsé›†æˆChartsè¯´å¤šäº†éƒ½æ˜¯æ³ªï¼Œå…¨æ˜¯å‘ï¼ä¸è¿‡å…¨éƒ½æå¥½ä»¥åï¼Œç”»å›¾è¡¨è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚","text":"ç”¨cocoapodsé›†æˆChartsè¯´å¤šäº†éƒ½æ˜¯æ³ªï¼Œå…¨æ˜¯å‘ï¼ä¸è¿‡å…¨éƒ½æå¥½ä»¥åï¼Œç”»å›¾è¡¨è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ ä¸çŸ¥å’‹æ»´ï¼Œä¸€å¤§æ—©èµ·æ¥åæŠŠé¡¹ç›®cleanäº†ä¸€ä¸‹ï¼Œç„¶åæŠŠpodæ–‡ä»¶å…¨åˆ äº†ï¼Œé‡æ–°è¿è¡Œ1pod install ç„¶åå†cleanï¼Œå±…ç„¶å¥½äº†ã€‚ã€‚ã€‚ä¸‹é¢è®°å½•ä¸‹è¸©å‘çš„æ•´ä¸ªè¿‡ç¨‹ Charts æ˜¯ä½•æ–¹ç¥åœ£Chartsæ˜¯ä¸€å¥—éå¸¸æ¼‚äº®çš„å¼€æºå›¾è¡¨ç»„ä»¶ï¼Œå®ƒæ˜¯MPAndroidChartåœ¨è‹¹æœç«¯çš„ç§»æ¤ç‰ˆæœ¬ï¼ŒåŒæ—¶æ”¯æŒiOS/tvOS/OSXå¹³å°ï¼Œå¼€æºåœ°å€Githubã€‚ åŒæ—¶ï¼ŒChartsæ˜¯ç”¨ Swift è¯­è¨€ç¼–å†™çš„ï¼Œèƒ½å¤Ÿåœ¨ Swift å’Œ Objc å·¥ç¨‹ä¸­ä½¿ç”¨ã€‚ ä½¿ç”¨ç¯å¢ƒ Xcode 8.0 / Swift 3.0 (å¦‚æœè¦æ”¯æŒ Swift 2.3 ï¼Œè¯·æŸ¥çœ‹ Charts 2.3) iOS &gt;= 8.0 tvOS &gt;= 9.0 macOS &gt;= 10.11 ä½¿ç”¨æ–¹æ³•æœ¬æ–‡ä½¿ç”¨çš„æ˜¯é€šè¿‡cocopods æ¥å®‰è£…çš„ï¼Œä¸­é—´çš„è¿‡ç¨‹æœ‰ç‚¹æ›²æŠ˜ é€šè¿‡ cocoapods é›†æˆå¦‚æœé¡¹ç›®è¿˜æœªä½¿ç”¨cocoapodsï¼Œå¯ç”¨ç»ˆç«¯åœ¨æ ¹ç›®å½•ä¸‹è¾“å…¥1pod init ç„¶ååœ¨é¡¹ç›®çš„ Podfile æ–‡ä»¶ä¸­æ·»åŠ  Charts1pod 'Charts', '~&gt; 3.0' å¦‚æœä¸å‡ºæ„å¤–çš„è¯ï¼Œä¼šåœ¨å®‰è£…è¿‡ç¨‹ä¸­æŠ¥ä¸ªå°é”™ 1[!] Pods written in Swift can only be integrated as frameworks; add `use_frameworks!` to your Podfile or target to opt into using it. The Swift Pod being used is: Charts æ­å–œè¸©åˆ°äº†ç¬¬ä¸€ä¸ªå‘ ä¸ºä»€ä¹ˆå‘¢åŸæ¥æ ¹æ®è‹¹æœçš„ç›¸å…³æ”¿ç­–ï¼Œåœ¨ Swifté¡¹ç›®ä¸­è‹¹æœå°†ä¸å…è®¸ä½ ç§è‡ªåŒ…å«é™æ€åº“äº†ï¼Œå› æ­¤æˆ‘ä»¬çš„è§£å†³åŠæ³•æ˜¯,åœ¨ podfile æ–‡ä»¶ä¸­ æ·»åŠ è¿™ä¹ˆä¸€å¥12pod 'Charts', '~&gt; 3.0'use_frameworks! use_frameworksï¼é€‰é¡¹æ˜¯å‘Šè¯‰ CocoaPods ä½¿ç”¨ framework è€Œä¸æ˜¯é™æ€åº“ã€‚è¿™åœ¨ Swift é¡¹ç›®ä¸­æ˜¯å¿…é€‰ã€‚ å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å¼€å§‹å¯¼å…¥ å¯¼å…¥åº“åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œè¾“å…¥1pod install é™å¾…å‡ åˆ†é’Ÿåï¼Œä¼šæœ‰æç¤ºå€’å…¥æˆåŠŸè¿™æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ‰“å¼€ xcworkspace æ–‡ä»¶,æ³¨æ„å“¦ï¼Œæ˜¯ xcworkspace ä¸å†æ˜¯åŸæ¥çš„ xcodeprojæ–‡ä»¶äº† å› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®æ˜¯ OC çš„ï¼Œè€Œ Charts æ˜¯ç”¨ Swift ç¼–å†™çš„ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ä¸ªæ¡¥æ¥æ–‡ä»¶å®Œæˆåï¼Œä¼šæœ‰æç¤ºæ˜¯å¦éœ€è¦æ¡¥æ¥ï¼Œç‚¹å‡» Create Bridging Header æ‰§è¡Œå®Œè¿™ä¸€æ­¥åï¼Œå¦‚æœæœ‰æŠ¥é”™ä¹‹ç±»çš„ï¼Œå¯ä»¥å…ˆæŠŠé¡¹ç›® clean ä¸€ä¸‹ æ•²é»‘æ¿ è¿™æ˜¯ä¸€é“é€åˆ†é¢˜ï¼Œåƒä¸‡ä¸èƒ½å¿˜ æ¥ç€åœ¨æ¡¥æ¥æ–‡ä»¶ é¡¹ç›®å-Bridging-Header.h ä¸­ï¼Œå†™ä¸Šè¦å¼•ç”¨çš„ Swift å¤´æ–‡ä»¶ã€‚1@import Charts; å¤§åŠŸå‘Šæˆè¿›å…¥æµ‹è¯•é˜¶æ®µåœ¨ViewController.mä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š12345678910111213141516171819202122232425262728293031323334353637383940- (void)viewDidLoad &#123;[super viewDidLoad];self.view.backgroundColor = [UIColor colorWithRed:0.184 green:1.000 blue:0.738 alpha:1.000];lineView = [[LineChartView alloc]initWithFrame:CGRectMake(0, self.view.bounds.size.height / 3.0f,[UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height / 3.0)];lineView.backgroundColor = [UIColor colorWithRed:0.184 green:1.000 blue:0.738 alpha:1.000];[self.view addSubview:lineView];lineView.dragEnabled = YES;//æ˜¯å¦æ‹–æ‹½ï¼ŒlineView.drawGridBackgroundEnabled = NO;//ç»˜åˆ¶ç½‘æ ¼èƒŒæ™¯lineView.scaleXEnabled = NO;lineView.pinchZoomEnabled = NO;lineView.descriptionText = @\"æ¯æœˆæ”¶å…¥æ”¯å‡ºå›¾\";//Xè½´è®¾ç½®ChartXAxis *xAxis = lineView.xAxis;xAxis.labelPosition = XAxisLabelPositionBothSided;//Xè½´æ ·å¼xAxis.drawLabelsEnabled = YES;//Xè½´æ˜¯å¦éœ€è¦ç»˜åˆ¶æ–‡å­—xAxis.drawAxisLineEnabled = YES;//Xè½´ç»˜åˆ¶xAxis.drawGridLinesEnabled = NO;//Xè½´ç½‘æ ¼ç»˜åˆ¶xAxis.axisLineWidth = 0.4f;//æ•°è½´å®½åº¦[xAxis setLabelCount:10 force:NO];//Xè½´æ•°é‡ä¸€èˆ¬é»˜è®¤æ˜¯6ä¸ª//Yè½´è®¾ç½®ChartYAxis *yAxis = lineView.leftAxis;yAxis.spaceTop = .5f;//Yè½´é¡¶éƒ¨çš„æœ€å¤§å€¼çš„ç™¾åˆ†æ¯”yAxis.labelFont = [UIFont fontWithName:@\"HelveticaNeue-Light\" size:12.f];[yAxis setLabelCount:5 force:NO];//Yè½´åæ ‡ä¸ªæ•°yAxis.labelTextColor = [UIColor blackColor];//Yè½´åæ ‡æ–‡å­—é¢œè‰²yAxis.labelPosition = YAxisLabelPositionInsideChart;yAxis.drawGridLinesEnabled = NO;//Yè½´ç½‘æ ¼yAxis.axisLineColor = UIColor.blackColor;lineView.rightAxis.enabled = NO;int count = 30;double range = 10;[self setDataCount:count range:range];[lineView animateWithXAxisDuration:3 yAxisDuration:3];// Do any additional setup after loading the view, typically from a nib.&#125; ç„¶åéšæœºé…ç½®ä¸€ä¸‹æ•°æ®ï¼Œå°±èƒ½çœ‹åˆ°ä¸¤æ¡æ›²çº¿äº†å®Œç¾ğŸ¤—demoåœ°å€ï¼šChartsDemo å‚è€ƒåšå®¢Cocoapods å®‰è£…å‚è€ƒSwifté™æ€åº“å‚è€ƒ","categories":[{"name":"åæ§½","slug":"åæ§½","permalink":"http://www.zhimakaiyuan.com/categories/åæ§½/"},{"name":"æŠ€æœ¯","slug":"åæ§½/æŠ€æœ¯","permalink":"http://www.zhimakaiyuan.com/categories/åæ§½/æŠ€æœ¯/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://www.zhimakaiyuan.com/tags/iOS/"}]},{"title":"Add SSH Key to Your Remote Client","slug":"add-SSH-Key-to-Your-remote-clint","date":"2016-11-03T05:26:30.000Z","updated":"2016-12-14T02:41:29.000Z","comments":true,"path":"2016/11/03/add-SSH-Key-to-Your-remote-clint/","link":"","permalink":"http://www.zhimakaiyuan.com/2016/11/03/add-SSH-Key-to-Your-remote-clint/","excerpt":"å‰æ®µæ—¶é—´ï¼Œä¹°äº†Vultrå®¶çš„VPSç”¨ä½œshadowsocksï¼Œæœ€è¿‘çªç„¶å¾ˆæ„Ÿå…´è¶£ï¼Œäºæ˜¯æ£é¼“äº†ä¸‹ï¼Œæ¯æ¬¡ç™»å½•çš„æ—¶å€™éƒ½éœ€è¦è¾“å…¥å¯†ç æœ‰ç‚¹éº»çƒ¦ï¼Œå°±æ‰¾åˆ°äº†å¦‚ä½•ç”¨sshç™»å½•çš„æ–¹æ³•ã€‚","text":"å‰æ®µæ—¶é—´ï¼Œä¹°äº†Vultrå®¶çš„VPSç”¨ä½œshadowsocksï¼Œæœ€è¿‘çªç„¶å¾ˆæ„Ÿå…´è¶£ï¼Œäºæ˜¯æ£é¼“äº†ä¸‹ï¼Œæ¯æ¬¡ç™»å½•çš„æ—¶å€™éƒ½éœ€è¦è¾“å…¥å¯†ç æœ‰ç‚¹éº»çƒ¦ï¼Œå°±æ‰¾åˆ°äº†å¦‚ä½•ç”¨sshç™»å½•çš„æ–¹æ³•ã€‚ å‡†å¤‡å·¥ä½œMacã€VPSï¼ˆå®‰è£…çš„æ˜¯ubuntu 16.0ï¼‰ å·¥ä½œåŸç†sshé™¤äº†ä½¿ç”¨å¯†ç éªŒè¯å¤–ï¼Œè¿˜æä¾›äº†ä¸€ç§å…¬ç§å¯†é’¥çš„éªŒè¯æ–¹å¼ã€‚å®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªç§é’¥ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„å…¬é’¥ï¼Œç„¶åå°†å…¬é’¥ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šã€‚ å¼€å§‹å‡†å¤‡ åœ¨æœ¬åœ°æœºå™¨åˆ›å»ºå…¬é’¥åœ¨å®¢æˆ·ç«¯ç”Ÿæˆç§é’¥ã€å…¬é’¥ï¼ˆæ³¨æ„ï¼Œåœ¨Mac ä¸Šå®Œæˆï¼‰1ssh-keygen -t rsa -C 'your email' ç„¶åä¸€è·¯å›è½¦ï¼Œç”Ÿæˆä½ è‡ªå·±çš„å¯†é’¥å¯¹ï¼ŒæˆåŠŸæˆªå›¾å¦‚ä¸‹ å°†å…¬é’¥å¤åˆ¶åˆ°sshæœåŠ¡å™¨å°†å‰ä¸€æ­¥éª¤ç”Ÿæˆçš„å…¬é’¥~/id_rsa.pubæ–‡ä»¶ï¼Œå¤åˆ¶åˆ°sshæœåŠ¡å™¨å¯¹åº”ç”¨æˆ·ä¸‹çš„~/.ssh/authorized_keysæ–‡ä»¶,å¯ä»¥æœ‰å¤šç§æ–¹å¼ï¼Œè¿™é‡Œåªä»‹ç»å¸¸ç”¨çš„ä¸€ç§ã€‚12brew install ssh-copy-idssh-copy-id username@hostname #å°†usernameå’Œhostnameæ›¿æ¢ä¸ºä½ çš„sshæœåŠ¡å™¨ç”¨æˆ·åå’ŒIP å½“sshæœåŠ¡å™¨usernameç”¨æˆ·ç›®å½•ä¸‹å°šæœªæœ‰.sshç›®å½•æ—¶ä½¿ç”¨æ­¤æ–¹å¼1cat ~/.ssh/id_rsa.pub | ssh username@hostname \"mkdir ~/.ssh; cat &gt;&gt; ~/.ssh/authorized_keys\" é€šç”¨æ–¹å¼1234scp ~/.ssh/id_rsa.pub username@hostname:~/ #å°†å…¬é’¥æ–‡ä»¶å¤åˆ¶è‡³sshæœåŠ¡å™¨ssh username@hostname #ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç æ–¹å¼ç™»å½•è‡³sshæœåŠ¡å™¨mkdir .ssh #è‹¥.sshç›®å½•å·²å­˜åœ¨ï¼Œå¯çœç•¥æ­¤æ­¥cat id_rsa.pub &gt;&gt; .ssh/authorized_keys #å°†å…¬é’¥æ–‡ä»¶id_rsa.pubæ–‡ä»¶å†…å®¹è¿½åŠ åˆ°authorized_keysæ–‡ä»¶ å¿«æ·ç™»å½•å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œå³å¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç›´æ¥ç™»å½•sshæœåŠ¡å™¨ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒä½ è®°ä¸ä½å¯†ç äº†ä»¥åç™»å½•sshï¼Œåªéœ€è¦åœ¨ä½ çš„Macä¸Šè¾“å…¥ username@hostname``` å³å¯ä¸ç”¨è¾“å…¥å¯†ç å•¦ï½123456789# æ€è€ƒå³ä½¿è¿™æ ·ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦è¾“å…¥è¿œç¨‹æœåŠ¡å™¨çš„ipåœ°å€ï¼Œæœ‰æ—¶å€™çœŸçš„è„‘å®¹é‡ä¸å¤Ÿå•Šï¼Œæ€ä¹ˆåŠï¼Œæ€ä¹ˆåŠï¼Œæ€ä¹ˆåŠï¼ï¼ï¼æ²¡å…³ç³»ï¼Œæˆ‘ä»¬è¿˜èƒ½å®ç°æœ¬åœ°ä¸€æ¡å‘½ä»¤å°±èƒ½ç™»å½•**sshæœ¬èº«ä¹Ÿæä¾›äº†ä¸€ç§å¿«æ·çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¾€~/.ssh/configé…ç½®æ–‡ä»¶æ·»åŠ ä½ çš„sshæœåŠ¡å™¨ä¿¡æ¯å³å¯**åœ¨æœ¬åœ°å¯å®¢æˆ·ç«¯ï¼ˆä½ çš„Macï¼‰è¾“å…¥ vim ~/.ssh/config1ç„¶ååœ¨ç»ˆç«¯è¾“å…¥ i å¼€å§‹æ’å…¥å¦‚ä¸‹å†…å®¹ï¼š Host name#è‡ªå®šä¹‰åˆ«åHostName hostname #æ›¿æ¢ä¸ºä½ çš„sshæœåŠ¡å™¨ipæˆ–domainPort 22 #sshæœåŠ¡å™¨ç«¯å£ï¼Œé»˜è®¤ä¸º22User root #sshæœåŠ¡å™¨ç”¨æˆ·åIdentityFile ~/.ssh/id_rsa #ç¬¬ä¸€ä¸ªæ­¥éª¤ç”Ÿæˆçš„å…¬é’¥æ–‡ä»¶å¯¹åº”çš„ç§é’¥æ–‡ä»¶1234æŒ‰ä¸‹ESCï¼Œç„¶åä¾æ¬¡è¾“å…¥ :wqä¿å­˜å¹¶é€€å‡ºæœ€ç»ˆï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç»ˆç«¯è¾“å…¥ ssh name```å°±èƒ½è¿œç¨‹ç™»å½•æˆ‘ä»¬çš„VPSå•¦ï½ å†™åœ¨æœ€åè¿™ç¯‡æ–‡ç« å¤šäºäº†æˆ‘ä»¬çš„é»„å°è´±åŒå­¦","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://www.zhimakaiyuan.com/categories/æŠ€æœ¯/"}],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://www.zhimakaiyuan.com/tags/å·¥å…·/"},{"name":"VPS","slug":"VPS","permalink":"http://www.zhimakaiyuan.com/tags/VPS/"}]},{"title":"Macä¸Šæ­å»ºshadowsocksæœåŠ¡","slug":"Macä¸Šæ­å»ºshadowsocksæœåŠ¡","date":"2016-10-27T06:27:24.000Z","updated":"2016-12-14T02:42:17.000Z","comments":true,"path":"2016/10/27/Macä¸Šæ­å»ºshadowsocksæœåŠ¡/","link":"","permalink":"http://www.zhimakaiyuan.com/2016/10/27/Macä¸Šæ­å»ºshadowsocksæœåŠ¡/","excerpt":"ä¹‹å‰çœ‹ç€æ•™ç¨‹è‡ªå·±ä¹Ÿä¹±ä¸ƒå…«ç³Ÿçš„æ­å»ºäº†ä¸€ä¸ªssçš„æœåŠ¡ç«¯ï¼Œä½†æ˜¯æ„Ÿè§‰ä¸€å›¢ç³Ÿï¼Œäºæ˜¯è¶ç€è‡ªå·±æœ‰æ—¶é—´ï¼Œå°±é‡æ–°æ­å»ºä¸€ä¸‹ï¼Œé¡ºä¾¿å¥½å¥½è®°å½•ä¸‹æ­å»ºçš„è¿‡ç¨‹ï¼Œæ–¹ä¾¿è‡ªå·±ï¼Œä¹Ÿå¸Œæœ›èƒ½ç»™å…¶ä»–åˆšæ¥è§¦çš„ä¸€ç‚¹å¸®åŠ©ã€‚é¦–å…ˆæˆ‘è‡ªå·±çš„æ˜¯ä¸€å°Macï¼Œæ‰€ä»¥ä¸»è¦è®°å½•çš„ä¹Ÿæ˜¯Macä¸Šçš„æ“ä½œï¼Œæˆ‘çš„vpsä¹°çš„æ˜¯æ¬ç“¦å·¥19.99$çš„ï¼Œç›®å‰ä½¿ç”¨æ„Ÿè§‰è¿˜è¡Œã€‚","text":"ä¹‹å‰çœ‹ç€æ•™ç¨‹è‡ªå·±ä¹Ÿä¹±ä¸ƒå…«ç³Ÿçš„æ­å»ºäº†ä¸€ä¸ªssçš„æœåŠ¡ç«¯ï¼Œä½†æ˜¯æ„Ÿè§‰ä¸€å›¢ç³Ÿï¼Œäºæ˜¯è¶ç€è‡ªå·±æœ‰æ—¶é—´ï¼Œå°±é‡æ–°æ­å»ºä¸€ä¸‹ï¼Œé¡ºä¾¿å¥½å¥½è®°å½•ä¸‹æ­å»ºçš„è¿‡ç¨‹ï¼Œæ–¹ä¾¿è‡ªå·±ï¼Œä¹Ÿå¸Œæœ›èƒ½ç»™å…¶ä»–åˆšæ¥è§¦çš„ä¸€ç‚¹å¸®åŠ©ã€‚é¦–å…ˆæˆ‘è‡ªå·±çš„æ˜¯ä¸€å°Macï¼Œæ‰€ä»¥ä¸»è¦è®°å½•çš„ä¹Ÿæ˜¯Macä¸Šçš„æ“ä½œï¼Œæˆ‘çš„vpsä¹°çš„æ˜¯æ¬ç“¦å·¥19.99$çš„ï¼Œç›®å‰ä½¿ç”¨æ„Ÿè§‰è¿˜è¡Œã€‚ å†™åœ¨æœ€å‰é¢ï¼šä¸ºä»€ä¹ˆç¿»å¢™ï¼Ÿåº”è¯¥æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„åŸå› ï¼Œæ€»çš„æ¥è¯´ï¼Œè¿˜æ˜¯â€èµµå®¶äººâ€œç®¡å¾—å¤ªå®½ï¼Œå„ç§è®¿é—®ä¸äº†ç›®å‰ä½¿ç”¨çš„å·¥å…·ä¹Ÿæ˜¯ç§ç±»ç¹å¤šï¼Œå¾ˆå¤šå…è´¹çš„ä¸ç¨³å®šï¼Œé€Ÿåº¦æ…¢ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿä¸è§å¾—å®‰å…¨ï¼Œä»˜è´¹çš„è™½ç„¶å¥½ç‚¹ï¼Œä½†æ˜¯ä¾ç„¶æ˜¯ä½¿ç”¨çš„åˆ«äººçš„ä»£ç†æœåŠ¡å™¨ã€‚å› æ­¤ï¼Œè¿˜æ˜¯æˆ‘ä»¬è‡ªå·±æ¥æ­ä¸€ä¸ªå§ï¼Œè‡³äºä¸ºä»€ä¹ˆé€‰æ‹©ssï¼Œä¸»è¦æ˜¯è§‰å¾—æ­å»ºæ¯”è¾ƒæ–¹ä¾¿ï¼Œè€Œä¸”å®‰å…¨æ€§æƒ³å¯¹è¾ƒå¥½ éœ€è¦å‡†å¤‡å“ªäº›ç”µè„‘ï¼ˆMacï¼‰ã€vpsï¼ˆubuntu 16 ï¼Š 64ï¼‰ shadowsocks æœåŠ¡å™¨å®‰è£…ç™»é™†ä½ çš„è¿œç¨‹æœåŠ¡å™¨æ‰“å¼€Macè‡ªå¸¦çš„ç»ˆç«¯ssh root@ä½ çš„ip -p ä½ çš„sshç«¯å£ï¼Œè‹¥æ²¡æœ‰ç‰¹æ®Šåˆ†é…ï¼Œä¸€èˆ¬éƒ½æ˜¯22 æ›´æ–°æºè½¯ä»¶1root@localhost:~# sudo apt-get update æ›´æ–°å®Œæˆåï¼Œä¼šæœ‰æç¤º å®‰è£…PIPç¯å¢ƒroot@localhost:~# sudo apt-get install python-pipç”±äºåŸä½œè€…å·²ç»ä¸å†æ›´æ–° pip ä¸‹çš„æºä»£ç ï¼Œæ•…ä¸å†ä½¿ç”¨ pip å®‰è£… Shadowsocksã€‚ å®‰è£…shadowsocks pip install shadowsocks ç”±äºåŸä½œè€…å·²ç»ä¸å†æ›´æ–° pip ä¸‹çš„æºä»£ç ï¼Œæ•…ä¸å†ä½¿ç”¨ pip å®‰è£… Shadowsocksï¼Œè€Œæ˜¯æ”¹ä¸ºä¸‹è½½ Github çš„ master åˆ†æ”¯æ¥å®‰è£…ã€‚å¦‚æœåœ¨ä¸€æ®µæ—¶é—´åï¼Œç‰ˆæœ¬å‡çº§äº†ï¼Œåˆ™å…ˆå¸è½½ï¼Œå¹¶å†æ¬¡æ‰§è¡Œæœ¬è„šæœ¬å°±å¯ä»¥å‡çº§ä¸ºæœ€æ–°ç‰ˆã€‚è¿™é‡Œé‡‡ç”¨äº†ç§‹æ°´é€¸å†°çš„åšå®¢ï¼Œé‡‡ç”¨è¯¥ä¸€é”®å®‰è£… Python ç‰ˆ Shadowsocks çš„æœ€æ–°ç‰ˆï¼ŒåŒæ—¶å®‰è£…äº† Python åŒ…ç®¡ç†å·¥å…· pipã€‚ 123wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.shchmod +x shadowsocks.sh./shadowsocks.sh 2&gt;&amp;1 | tee shadowsocks.log å®‰è£…å®Œæˆåï¼Œè„šæœ¬æç¤ºå¦‚ä¸‹12345678910Congratulations, shadowsocks install completed!Your Server IP:your_server_ipYour Server Port:your_server_portYour Password:your_passwordYour Local IP:127.0.0.1Your Local Port:1080Your Encryption Method:aes-256-cfbWelcome to visit:https://teddysun.com/342.htmlEnjoy it! å¸è½½æ–¹æ³•1./shadowsocks.sh uninstall è¿›å…¥é…ç½®1vi /etc/shadowsocks.json é”®ç›˜ä¸ŠæŒ‰ä¸‹ã€Œiã€é”®ï¼Œè¿›å…¥Insert mode å•ç”¨æˆ·é…ç½®æ–‡ä»¶12345678910&#123;\"server\":\"0.0.0.0\",\"server_port\":8989,\"local_address\":\"127.0.0.1\",\"local_port\":1080,\"password\":\"yourpassword\",\"timeout\":300,\"method\":\"aes-256-cfb\",\"fast_open\": false&#125; å¤šç”¨æˆ·é…ç½®æ–‡ä»¶123456789101112131415&#123;\"server\":\"0.0.0.0\",\"local_address\":\"127.0.0.1\",\"local_port\":1080,\"port_password\":&#123;\"8989\":\"password0\",\"9001\":\"password1\",\"9002\":\"password2\",\"9003\":\"password3\",\"9004\":\"password4\"&#125;,\"timeout\":300,\"method\":\"aes-256-cfb\",\"fast_open\": false&#125; è¿™é‡Œéœ€è¦æ³¨æ„,â€â€{}ä¸è¦æ¼äº†é…ç½®å®Œæˆä¹‹åï¼Œå…ˆæŒ‰ã€Œescã€é€€å‡ºï¼Œç„¶åæŒ‰ä¸€ä¸‹ã€Œï¼šã€å†’å·é”®è¿›å…¥ã€ŒLast line modeã€ï¼Œä¾‹å¦‚ï¼š : w filename ï¼ˆè¾“å…¥ ã€Œw filenameã€å°†æ–‡ç« ä»¥æŒ‡å®šçš„æ–‡ä»¶åfilenameä¿å­˜ï¼‰ : wq (è¾“å…¥ã€Œwqã€ï¼Œå­˜ç›˜å¹¶é€€å‡ºvi) : q! (è¾“å…¥q!ï¼Œ ä¸å­˜ç›˜å¼ºåˆ¶é€€å‡ºvi)è¿™é‡Œæˆ‘ä»¬ç›´æ¥å­˜ç›˜å¹¶é€€å‡ºï¼Œã€Œï¼šwqã€ ä½¿ç”¨å‘½ä»¤1234å¯åŠ¨ï¼š/etc/init.d/shadowsocks startåœæ­¢ï¼š/etc/init.d/shadowsocks stopé‡å¯ï¼š/etc/init.d/shadowsocks restartçŠ¶æ€ï¼š/etc/init.d/shadowsocks status å‚è€ƒé“¾æ¥http://jiji262.github.io/2016/09/28/setup-Shadowsocks-on-ubuntu-1604/https://teddysun.com/342.html","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://www.zhimakaiyuan.com/categories/æŠ€æœ¯/"}],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://www.zhimakaiyuan.com/tags/å·¥å…·/"},{"name":"ç¿»å¢™","slug":"ç¿»å¢™","permalink":"http://www.zhimakaiyuan.com/tags/ç¿»å¢™/"},{"name":"Shadowsocks","slug":"Shadowsocks","permalink":"http://www.zhimakaiyuan.com/tags/Shadowsocks/"}]},{"title":"Effective-Objective-C 2.0ç¬”è®°","slug":"Effective-Objective-C-2-0ç¬”è®°","date":"2016-10-10T02:51:38.000Z","updated":"2016-12-14T02:41:47.000Z","comments":true,"path":"2016/10/10/Effective-Objective-C-2-0ç¬”è®°/","link":"","permalink":"http://www.zhimakaiyuan.com/2016/10/10/Effective-Objective-C-2-0ç¬”è®°/","excerpt":"ä¸Šä¸€ä¸ªåšå®¢å†™äº†Effective Objective-C 2.0 çš„æ€»çš„æ¦‚è§ˆï¼Œè¿™ä¸€ç« å‡†å¤‡è®°å½•ä¸€ä¸‹æœ¬ä¹¦ä¸­æåˆ°çš„ç¼–å†™é«˜è´¨é‡iOS ä¸ OS X ä»£ç çš„52ä¸ªæœ‰æ•ˆæ–¹æ³•","text":"ä¸Šä¸€ä¸ªåšå®¢å†™äº†Effective Objective-C 2.0 çš„æ€»çš„æ¦‚è§ˆï¼Œè¿™ä¸€ç« å‡†å¤‡è®°å½•ä¸€ä¸‹æœ¬ä¹¦ä¸­æåˆ°çš„ç¼–å†™é«˜è´¨é‡iOS ä¸ OS X ä»£ç çš„52ä¸ªæœ‰æ•ˆæ–¹æ³• ç¬¬1æ¡:äº†è§£ Objective-C è¯­è¨€çš„èµ·æºç¬¬2æ¡:åœ¨ç±»çš„å¤´æ–‡ä»¶ä¸­å°½é‡å°‘å¼•å…¥å…¶ä»–æ–‡ä»¶ç¬¬3æ¡:å¤šç”¨å­—é¢é‡è¯­æ³•ï¼Œå°‘ç”¨ä¸ä¹‹ç­‰ä»·çš„æ–¹æ³•ç¬¬4æ¡:å¤šç”¨ç±»å‹å¸¸é‡ï¼Œå°‘ç”¨ #define é¢„å¤„ç†æŒ‡ä»¤ç¬¬5æ¡:ç”¨æšä¸¾è¡¨ç¤ºçŠ¶æ€ã€é€‰é¡¹ã€çŠ¶æ€ç  ç¬¬6æ¡:ç†è§£â€œå±æ€§â€è¿™ä¸€æ¦‚å¿µç¬¬7æ¡:åœ¨å¯¹è±¡å†…éƒ¨å°½é‡ç›´æ¥è®¿é—®å®ä¾‹å˜é‡ç¬¬8æ¡:ç†è§£â€œå¯¹è±¡ç­‰åŒæ€§â€è¿™ä¸€æ¦‚å¿µç¬¬9æ¡:ä»¥â€œç±»æ—æ¨¡å¼â€éšè—å®ç°ç»†èŠ‚ç¬¬10æ¡:åœ¨æ—¢æœ‰ç±»ä¸­ä½¿ç”¨å…³è”å¯¹è±¡å­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç¬¬11æ¡:ç†è§£ obje_msgSend çš„ä½œç”¨ç¬¬12æ¡:ç†è§£æ¶ˆæ¯è½¬å‘æœºåˆ¶ç¬¬13æ¡:ç”¨â€œæ–¹æ³•è°ƒé…æŠ€æœ¯â€æµ‹è¯•â€œé»‘ç›’æ–¹æ³•â€ç¬¬14æ¡:ç†è§£â€œç±»å¯¹è±¡â€çš„ç”¨æ„ ç¬¬15æ¡:ç”¨å‰ç¼€é¿å…å‘½åç©ºé—´å†²çªç¬¬16æ¡:æä¾›â€œå…¨èƒ½åˆå§‹åŒ–æ–¹æ³•â€ç¬¬17æ¡:å®ç° description æ–¹æ³•ç¬¬18æ¡:å°½é‡ä½¿ç”¨ä¸å¯å˜å¯¹è±¡ç¬¬19æ¡:ä½¿ç”¨æ¸…æ™°è€Œåè°ƒçš„å‘½åæ–¹å¼ç¬¬20æ¡:ä¸ºç§æœ‰æ–¹æ³•ååŠ å‰ç¼€ç¬¬21æ¡:ç†è§£ Objective-C é”™è¯¯æ¨¡å‹ç¬¬22æ¡:ç†è§£ NSCopying ç¬¬23æ¡:é€šè¿‡å§”æ‰˜ä¸æ•°æ®æºåè®®è¿›è¡Œå¯¹è±¡é—´é€šä¿¡ç¬¬24æ¡:å°†ç±»çš„å®ç°ä»£ç åˆ†æ•£åˆ°ä¾¿äºç®¡ç†çš„æ•°ä¸ªåˆ†ç±»ä¹‹ä¸­ç¬¬25æ¡:æ€»æ˜¯ä¸ºç¬¬ä¸‰æ–¹ç±»çš„åˆ†ç±»åç§°åŠ å‰ç¼€ç¬¬26æ¡:å‹¿åœ¨åˆ†ç±»ä¸­å£°æ˜å±æ€§ç¬¬27æ¡:ä½¿ç”¨ â€œclass-continuation åˆ†ç±»â€éšè—å®ç°ç»†èŠ‚ç¬¬28æ¡:é€šè¿‡åè®®æä¾›åŒ¿åå¯¹è±¡ ç¬¬29æ¡:ç†è§£å¼•ç”¨è®¡æ•°ç¬¬30æ¡:ä»¥ ARC ç®€åŒ–å¼•ç”¨è®¡æ•°ç¬¬31æ¡:","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"http://www.zhimakaiyuan.com/categories/å­¦ä¹ /"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://www.zhimakaiyuan.com/tags/iOS/"},{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"http://www.zhimakaiyuan.com/tags/ç¬”è®°/"}]},{"title":"Effective-Objective-C 2.0ç¬”è®°ï¼ˆæ¦‚è§ˆï¼‰","slug":"Effective-Objective-C-2-0ç¬”è®°ï¼ˆæ¦‚è§ˆï¼‰","date":"2016-02-01T07:19:23.000Z","updated":"2016-12-14T02:41:57.000Z","comments":true,"path":"2016/02/01/Effective-Objective-C-2-0ç¬”è®°ï¼ˆæ¦‚è§ˆï¼‰/","link":"","permalink":"http://www.zhimakaiyuan.com/2016/02/01/Effective-Objective-C-2-0ç¬”è®°ï¼ˆæ¦‚è§ˆï¼‰/","excerpt":"ä¸€ç›´æƒ³è¯´è¦è¯»å®Œè¿™æœ¬ä¹¦ï¼Œç»“æœåœ¨å’¸é±¼è€æ¹¿çš„ç£ä¿ƒä¸‹ï¼Œè¿˜æ˜¯æ²¡èƒ½çœ‹å®Œï¼ŒåŠªåŠ›è¿˜æ˜¯è¦é è‡ªå·±å•Šï¼Œä»Šå¤©æ­£å¥½æœ‰æ—¶é—´ï¼Œå°±å…ˆæŠŠæ ‡é¢˜é‡Œåœ¨è¿™é‡Œã€‚æˆ‘ä»¬å…ˆå®šä¸ªå°ç›®æ ‡ï¼Œæ¯”æ–¹è¯´ï¼Œå…ˆæŠŠè¿™52ä¸ªæœ‰æ•ˆæ–¹æ³•å†™å‡ºæ¥ï¼Œä»¥åå†æ…¢æ…¢å¡«å……ã€‚ç¼–å†™é«˜è´¨é‡iOSä¸OS Xä»£ç çš„52ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‚","text":"ä¸€ç›´æƒ³è¯´è¦è¯»å®Œè¿™æœ¬ä¹¦ï¼Œç»“æœåœ¨å’¸é±¼è€æ¹¿çš„ç£ä¿ƒä¸‹ï¼Œè¿˜æ˜¯æ²¡èƒ½çœ‹å®Œï¼ŒåŠªåŠ›è¿˜æ˜¯è¦é è‡ªå·±å•Šï¼Œä»Šå¤©æ­£å¥½æœ‰æ—¶é—´ï¼Œå°±å…ˆæŠŠæ ‡é¢˜é‡Œåœ¨è¿™é‡Œã€‚æˆ‘ä»¬å…ˆå®šä¸ªå°ç›®æ ‡ï¼Œæ¯”æ–¹è¯´ï¼Œå…ˆæŠŠè¿™52ä¸ªæœ‰æ•ˆæ–¹æ³•å†™å‡ºæ¥ï¼Œä»¥åå†æ…¢æ…¢å¡«å……ã€‚ç¼–å†™é«˜è´¨é‡iOSä¸OS Xä»£ç çš„52ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‚æœ¬ä¹¦åˆ†ä¸ºä¸ƒç« ï¼Œåˆ†åˆ«æ˜¯ ç†Ÿæ‚‰ Objective-Cé€šè®ºè¯¥è¯­è¨€çš„æ ¸å¿ƒæ¦‚å¿µ å¯¹è±¡ã€æ¶ˆæ¯ã€è¿è¡ŒæœŸå¯¹è±¡ä¹‹é—´èƒ½å¤Ÿå…³è”ä¸äº¤äº’ï¼Œè¿™æ˜¯é¢å‘å¯¹è±¡è¯­è¨€çš„é‡è¦ç‰¹å¾ã€‚è´²å¼ è®²è¿°è¿™äº›ç‰¹æ€§ï¼Œå¹¶æ·±å…¥ç ”ç©¶ä»£ç åœ¨è¿è¡ŒæœŸçš„è¡Œä¸ºã€‚ æ¥å£ä¸ API è®¾è®¡å¾ˆå°‘æœ‰é‚£ç§å†™å®Œå°±ä¸å†å¤ç”¨çš„ä»£ç ã€‚å³ä½¿ä»£ç ä¸å‘æ›´å¤šäººå…¬å¼€ï¼Œä¹Ÿä¾ç„¶æœ‰å¯èƒ½ç”¨åœ¨è‡ªå·±çš„å¤šä¸ªé¡¹ç›®ä¸­ã€‚æœ¬ç« è®²è§£å¦‚ä½•ç¼–å†™ä¸ Objective-C æ­é…å¾—å®œçš„ç±»ã€‚ åè®®ä¸åˆ†ç±»åè®®ä¸åˆ†ç±»æ˜¯ä¸¤ä¸ªéœ€è¦æŒæ¡çš„é‡è¦è¯­è¨€ç‰¹æ€§ã€‚è‹¥è¿ç”¨å¾—å½“ï¼Œåˆ™å¯ä»¥ä»¤ä»£ç æ˜“è¯»ã€æ˜“ç»´æŠ¤ä¸”å°‘å‡ºé”™ã€‚æœ¬ç« å°†å¸®åŠ©è¯»è€…ç²¾é€šè¿™ä¸¤ä¸ªæ¦‚å¿µã€‚ å†…å­˜ç®¡ç†Objective-C è¯­è¨€ä»¥å¼•ç”¨è®¡æ•°æ¥ç®¡ç†å†…å­˜ï¼Œè¿™ä»¤è®¸å¤šåˆå­¦è€…çº ç»“ï¼Œè¦æ˜¯ç”¨è¿‡ä»¥â€œåƒåœ¾æ”¶é›†å™¨â€ (garbage collector)æ¥ç®¡ç†å†…å­˜çš„è¯­è¨€ï¼Œé‚£ä¹ˆæ›´ä¼šå¦‚æ­¤ã€‚â€œè‡ªåŠ¨å¼•ç”¨è®¡æ•°â€æœºåˆ¶ç¼“è§£äº†æ­¤é—®é¢˜ï¼Œä¸è¿‡ä½¿ç”¨æ—¶æœ‰å¾ˆå¤šé‡è¦çš„æ³¨æ„äº‹é¡¹ï¼Œä»¥ç¡®ä¿å¯¹è±¡æ¨¡å‹æ­£ç¡®ï¼Œä¸è‡´å†…å­˜æ³„æ¼ã€‚æœ¬ç« æé†’è¯»è€…æ³¨æ„å†…å­˜ç®¡ç†ä¸­æ˜“çŠ¯çš„é”™è¯¯ã€‚ å—ä¸å¤§ä¸­æ¢æ´¾å‘è‹¹æœå…¬å¸å¼•å…¥äº†â€œå—â€è¿™ä¸€æ¦‚å¿µï¼Œå…¶ä½™æ³•ç±»ä¼¼äº C è¯­è¨€æ‰©å±•ä¸­çš„â€œé—­åŒ…â€(closure)ã€‚åœ¨ Objective-C è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸é‡‡ç”¨å—æ¥å®ç°ä¸€äº›åŸæ¥éœ€è¦å¾ˆå¤šæ ·æ¿ä»£ç æ‰èƒ½å®Œæˆçš„äº‹æƒ…ï¼Œå—è¿˜èƒ½å®ç°â€œä»£ç åˆ†ç¦»â€(code separation)ã€‚â€œå¤§ä¸­æ¢æ´¾å‘â€(Grand Central Dispatch,GCD) æä¾›äº†ä¸€å¥—ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒçš„ç®€å•æ¥å£ã€‚â€œå—â€å¯è§†ä¸ºGCDçš„ä»»åŠ¡ï¼Œæ ¹æ®ç³»ç»Ÿèµ„æºçŠ¶å†µï¼Œè¿™äº›ä»»åŠ¡ä¹Ÿè®¸èƒ½å¹¶å‘æ‰§è¡Œã€‚æœ¬ç« å°†æ•™ä¼šè¯»è€…å¦‚ä½•å……åˆ†è¿ç”¨è¿™ä¸¤é¡¹æ ¸å¿ƒæŠ€æœ¯ã€‚ ç³»ç»Ÿæ¡†æ¶å¤§å®¶é€šå¸¸ä¼šç”¨ Objective-C å¼€å¼€å‘Mac OS X æˆ– iOS ç¨‹åºã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹éƒ½æœ‰ä¸€å¥—å®Œæ•´çš„ç³»ç»Ÿæ¡†æ¶å¯ä¾›ä½¿ç”¨ï¼Œå‰è€…åä¸º Cocoa ï¼Œåè€…åä¸º Cocoa Touchã€‚æœ¬ç« å°†æ€»è§ˆè¿™äº›æ¡†æ¶ï¼Œå¹¶æ·±å…¥ç ”ç©¶å…¶ä¸­æŸäº›ç±»ã€‚ å…±æœ‰52ä¸ªæœ‰æ•ˆæ–¹æ³•ï¼Œä¼šåœ¨ä¸‹ä¸€ç« åšå®¢ä¸­å†™å‡ºæ¥","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"http://www.zhimakaiyuan.com/categories/å­¦ä¹ /"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://www.zhimakaiyuan.com/tags/iOS/"},{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"http://www.zhimakaiyuan.com/tags/ç¬”è®°/"}]},{"title":"å¼€å§‹å¥èº«","slug":"å¼€å§‹å¥èº«","date":"2016-01-15T04:03:40.000Z","updated":"2016-12-14T02:47:24.000Z","comments":true,"path":"2016/01/15/å¼€å§‹å¥èº«/","link":"","permalink":"http://www.zhimakaiyuan.com/2016/01/15/å¼€å§‹å¥èº«/","excerpt":"","text":"####ç»ˆäºå¼€å§‹å¥èº«äº†ï¼Œä»Šå¤©å°†æ˜¯ç¬¬ä¸‰æ¬¡å»äº†ï¼Œè¿˜æ˜¯çŸ«æ­£ä½“å‹ï¼Œçœ‹æ¥å¥èº«çš„é“è·¯å¾ˆæ¼«é•¿å•Šã€‚è·ç¦»ç›®æ ‡èº«æè¿˜å¾ˆé¥è¿œï¼ŒåŠ æ²¹å§ï¼Œéªšå¹´ï¼","categories":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"http://www.zhimakaiyuan.com/categories/ç”Ÿæ´»/"}],"tags":[{"name":"ç¢ç¢å¿µ","slug":"ç¢ç¢å¿µ","permalink":"http://www.zhimakaiyuan.com/tags/ç¢ç¢å¿µ/"},{"name":"å¥èº«","slug":"å¥èº«","permalink":"http://www.zhimakaiyuan.com/tags/å¥èº«/"}]},{"title":"CocoaPodsçš„ä½¿ç”¨ä¸å®‰è£…","slug":"CocoaPodsçš„ä½¿ç”¨ä¸å®‰è£…","date":"2016-01-12T05:07:11.000Z","updated":"2016-12-14T02:41:39.000Z","comments":true,"path":"2016/01/12/CocoaPodsçš„ä½¿ç”¨ä¸å®‰è£…/","link":"","permalink":"http://www.zhimakaiyuan.com/2016/01/12/CocoaPodsçš„ä½¿ç”¨ä¸å®‰è£…/","excerpt":"ä»€ä¹ˆæ˜¯CocoaPodsCocoaPodsæ˜¯å¼€å‘ OS X å’Œ iOS åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œè€Œå…¶æœ¬èº«æ˜¯åˆ©ç”¨rubyçš„ä¾èµ–ç®¡ç†gemè¿›è¡Œæ„å»ºçš„ã€‚å› æ­¤ï¼Œåœ¨è§£ææ•´åˆè¿‡ç¨‹ä¸­ï¼Œæœ€é‡è¦çš„å‡ ä¸ªgemsåˆ†åˆ«æ˜¯ï¼šCocoaPods/CocoaPods, CocoaPods/Core, å’Œ CocoaPods/Xcodeprojã€‚åœ¨æˆ‘ä»¬çš„å·¥ç¨‹é‡Œé¢ä¼šç”¨åˆ°JSONKitã€AFNetWorkingç­‰ç¬¬ä¸‰æ–¹å¼€æºåº“ï¼Œé¦–æ¬¡åœ¨å·¥ç¨‹ä¸­å¼•å…¥è¿™äº›ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œä¼šæ¶‰åŠè®¸å¤šé…ç½®ï¼Œå°¤å…¶æ˜¯åœ¨build phaseså’Œlinker flagsé…ç½®ä¸­è¿‡ç¨‹ä¸­ï¼Œä¼šå¼•èµ·è®¸å¤šäººä¸ºå› ç´ çš„é”™è¯¯ã€‚CocoaPodsçš„å‡ºç°ç®€åŒ–äº†è¿™ä¸€åˆ‡ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡CocoaPodsæŸ¥æ‰¾æ–°çš„ç¬¬ä¸‰æ–¹åº“ã€‚","text":"ä»€ä¹ˆæ˜¯CocoaPodsCocoaPodsæ˜¯å¼€å‘ OS X å’Œ iOS åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œè€Œå…¶æœ¬èº«æ˜¯åˆ©ç”¨rubyçš„ä¾èµ–ç®¡ç†gemè¿›è¡Œæ„å»ºçš„ã€‚å› æ­¤ï¼Œåœ¨è§£ææ•´åˆè¿‡ç¨‹ä¸­ï¼Œæœ€é‡è¦çš„å‡ ä¸ªgemsåˆ†åˆ«æ˜¯ï¼šCocoaPods/CocoaPods, CocoaPods/Core, å’Œ CocoaPods/Xcodeprojã€‚åœ¨æˆ‘ä»¬çš„å·¥ç¨‹é‡Œé¢ä¼šç”¨åˆ°JSONKitã€AFNetWorkingç­‰ç¬¬ä¸‰æ–¹å¼€æºåº“ï¼Œé¦–æ¬¡åœ¨å·¥ç¨‹ä¸­å¼•å…¥è¿™äº›ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œä¼šæ¶‰åŠè®¸å¤šé…ç½®ï¼Œå°¤å…¶æ˜¯åœ¨build phaseså’Œlinker flagsé…ç½®ä¸­è¿‡ç¨‹ä¸­ï¼Œä¼šå¼•èµ·è®¸å¤šäººä¸ºå› ç´ çš„é”™è¯¯ã€‚CocoaPodsçš„å‡ºç°ç®€åŒ–äº†è¿™ä¸€åˆ‡ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡CocoaPodsæŸ¥æ‰¾æ–°çš„ç¬¬ä¸‰æ–¹åº“ã€‚ CocoaPodsçš„å·¥ä½œåŸç†CocoaPodsçš„åŸç†æ˜¯å°†æ‰€æœ‰çš„ä¾èµ–åº“éƒ½æ”¾åˆ°å¦ä¸€ä¸ªåä¸ºPodsçš„é¡¹ç›®ä¸­ï¼Œç„¶åè®©ä¸»é¡¹ç›®ä¾èµ–Podsé¡¹ç›®ï¼Œè¿™æ ·ï¼Œæºç ç®¡ç†å·¥ä½œéƒ½ä»ä¸»é¡¹ç›®ç§»åˆ°äº†Podsé¡¹ç›®ä¸­ã€‚Podsé¡¹ç›®æœ€ç»ˆä¼šç¼–è¯‘æˆä¸€ä¸ªåä¸ºlibPods.açš„æ–‡ä»¶ï¼Œä¸»é¡¹ç›®åªéœ€è¦ä¾èµ–è¿™ä¸ª .aæ–‡ä»¶å³å¯ã€‚ CocoaPodsçš„å®‰è£…ä¸Šé¢å·²ç»æåˆ°äº†ï¼ŒCocoaPodsæ˜¯åˆ©ç”¨Rubyçš„ä¾èµ–ç®¡ç†gemè¿›è¡Œæ„å»ºï¼Œå› æ­¤å®‰è£…CocoaPodséœ€è¦åœ¨rubyçš„ç¯å¢ƒä¸‹ã€‚ 1.Rubyç¯å¢ƒæ­å»ºMac OSæ˜¯è‡ªå¸¦rubyç¯å¢ƒçš„ï¼Œä½†æ˜¯ä¿é™©èµ·è§ï¼Œè¿˜æ˜¯éœ€è¦æ›´æ–°ä¸€ä¸‹ã€‚a.æŸ¥çœ‹å½“å‰rubyç‰ˆæœ¬æ‰“å¼€Macçš„terminal è¾“å…¥ruby -vä»£ç å¦‚ä¸‹12$ ruby -vruby 2.0.0p645 (2015-04-13 revision 50299) [universal.x86_64-darwin15](#) b.æ›´æ¢rubyæºç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼ˆrubyçš„è½¯ä»¶æºrubygems.orgå› ä¸ºä½¿ç”¨çš„äºšé©¬é€Šçš„äº‘æœåŠ¡ï¼Œæ‰€ä»¥è¢«å¢™äº†ï¼Œéœ€è¦æ›´æ–°ä¸€ä¸‹rubyçš„æºï¼Œå›½å†…å¸¸ç”¨çš„é•œåƒæœåŠ¡æœ‰æ·˜å®é˜¿é‡Œäº‘çš„ï¼Œå±±ä¸œç†å·¥å¤§å­¦çš„,ä¸€èˆ¬ä½¿ç”¨æ·˜å®çš„ï¼‰gem sources â€“remove https://rubygems.org/gem sources -a https://ruby.taobao.org/gem sources -l ï¼ˆç”¨æ¥æ£€æŸ¥ä½¿ç”¨æ›¿æ¢é•œåƒä½ç½®æˆåŠŸï¼‰ä»£ç å¦‚ä¸‹123456789$ gem sources --remove https://rubygems.org/https://rubygems.org/ removed from sources$ gem sources -a https://ruby.taobao.org/https://ruby.taobao.org/ added to sources$ gem sources -l*** CURRENT SOURCES ***http://rubygems-china.oss.aliyuncs.comhttps://ruby.taobao.org/ 2.å‡çº§gemsudo gem update â€“systemå‡çº§æˆåŠŸåï¼Œä»£ç å¦‚ä¸‹ 3.ä¸‹è½½å®‰è£…CocoaPodså®‰è£…CocoaPodsï¼ˆOS X 10.11ä»¥å‰ï¼‰ sudo gem install cocoapodså®‰è£…CocoaPodsï¼ˆ10.11åè‹¹æœå‡çº§äº†å®‰å…¨ç­–ç•¥ï¼‰ sudo gem install -n /usr/local/bin cocoapodså®‰è£…æ›´æ–°åï¼Œä¼šæœ‰ gem installedæç¤º æ‰€æœ‰çš„é¡¹ç›®çš„Podspecæ–‡ä»¶éƒ½æ‰˜ç®¡åœ¨https://github.com/CocoaPods/Specsã€‚ç¬¬ä¸€æ¬¡æ‰§è¡Œpod setupæ—¶ï¼ŒCocoaPodsä¼šå°†è¿™äº›podspecç´¢å¼•æ–‡ä»¶æ›´æ–°åˆ°æœ¬åœ°çš„ /.cocoapods/ç›®å½•ä¸‹ï¼Œè¿™ä¸ªç´¢å¼•æ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œæœ‰80Må·¦å³ã€‚æ‰€ä»¥ç¬¬ä¸€æ¬¡æ›´æ–°æ—¶éå¸¸æ…¢ï¼Œä¸€èˆ¬æ›´æ–°äº†å°†è¿‘1ä¸ªå°æ—¶æ‰å®Œæˆã€‚ä¸€ä¸ªå«akinliuçš„æœ‹å‹åœ¨gitcafeå’Œoschinaä¸Šå»ºç«‹äº†CocoaPodsç´¢å¼•åº“çš„é•œåƒï¼Œå› ä¸ºgitcafeå’Œoschinaéƒ½æ˜¯å›½å†…çš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œç´¢å¼•æ›´æ–°æ“ä½œæ—¶ï¼Œä¼šå¿«å¾ˆå¤šã€‚å¦‚ä¸‹æ“ä½œå¯ä»¥å°†CocoaPodsè®¾ç½®æˆä½¿ç”¨gitcafeé•œåƒï¼š1.ç§»é™¤åŸæœ‰æœåŠ¡å™¨ pod repo remove master2.æ·»åŠ å¢ƒå†…æœåŠ¡å™¨ï¼ˆå»ºè®®ä½¿ç”¨ç¬¬ä¸€ä¸ªï¼‰ pod repo add master https://gitcafe.com/akuandev/Specs.git pod repo add master http://git.oschina.net/akuandev/Specs.git(å¼€æºä¸­å›½è¾ƒæ…¢)ä½¿ç”¨åŠæˆªå›¾å¦‚ä¸‹ å®Œæˆåï¼Œæ‰§è¡Œæ“ä½œï¼š1pod setup æ‰§è¡Œç»“æŸåä»£ç å¦‚ä¸‹å›¾ï¼šè‡³æ­¤ï¼ŒCocoaPodså°±å®Œå…¨å®‰è£…ç»“æŸï¼Œso easyï¼ CocoaPodsçš„ä½¿ç”¨1.æ–°å»ºPodfileæ–‡ä»¶ä½¿ç”¨æ—¶éœ€è¦åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºPodfileçš„æ–‡ä»¶ï¼Œå°†ä¾èµ–çš„åº“åå­—ä¾æ¬¡åˆ—åœ¨æ–‡ä»¶ä¸­å³å¯12promote: lhl$ cd /Users/chengmei/Desktop/Test promote:Test lhl$ touch Podfile è¿™æ—¶å€™ï¼Œåœ¨ä½ çš„å·¥ç¨‹æ–‡ä»¶ä¸­å°±æ–°å»ºäº†ä¸€ä¸ªåä¸ºPodfileçš„æ–‡ä»¶ã€‚ 2.ç¼–è¾‘Podfileæ–‡ä»¶ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€åˆšæ‰æ–°å»ºçš„Podfileæ–‡ä»¶ï¼Œæ­¤æ—¶çš„æ–‡ä»¶åº”æ˜¯ç©ºç™½çš„ï¼ŒPodfile æ–‡ä»¶çš„æ ¼å¼åº”è¯¥ç±»ä¼¼ä»¥ä¸‹ï¼š1234platform :ios, '7.0'pod 'AFNetworking'ï¼Œ '&gt; 3.0.4'pod 'LCTabBarController'ï¼Œ '&gt; 1.2.2'pod 'LCBannerView' æ³¨æ„*a. platform é‚£ä¸€è¡Œï¼Œios ä¸‰ä¸ªå­—æ¯éƒ½è¦å°å†™ï¼Œè€Œä¸”ä¸å‰é¢çš„å†’å·ä¹‹é—´ä¸èƒ½æœ‰é—´éš”ã€‚b. åé¢çš„ç‰ˆæœ¬å·ä¹Ÿå¯ä»¥ä¸å†™ï¼Œä½†æ˜¯æœ‰äº›å¼€æºåº“å¯¹ç‰ˆæœ¬æ˜¯æœ‰è¦æ±‚çš„ï¼Œæ¯”å¦‚è¦åœ¨ iOS 7.0 ä»¥ä¸Šæ‰èƒ½è¿è¡Œï¼Œé‡åˆ°è¿™æ ·çš„å¼€æºåº“å°±éœ€è¦å†™ä¸Šç‰ˆæœ¬å·ã€‚c. platform ä¸‹é¢å°±æ˜¯ CocoaPods éœ€è¦é›†æˆçš„å¼€æºåº“ï¼Œæ ¹æ®ä½ çš„éœ€è¦ç¡®å®šé›†æˆæˆäº›åº“ã€‚ 3.æŸ¥æ‰¾æ‰€éœ€è¦çš„ç±»åº“ä¾‹å¦‚ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å·¥ç¨‹æ–‡ä»¶ä¸­æ·»åŠ AFNetworkingï¼Œé¦–å…ˆéœ€è¦åœ¨ CocoaPods é‡Œé¢å…ˆæœç´¢æ˜¯å¦æœ‰éœ€è¦çš„åº“ï¼Œåœ¨ Terminal ä¸­è¾“å…¥ï¼š1pod search AFNetworking æ‰€æ˜¾ç¤ºä»£ç å¦‚ä¸‹ï¼š1pod 'AFNetworking', '&gt; 3.0.4' å°±æ˜¯éœ€è¦æˆ‘ä»¬åœ¨Podfileæ–‡ä»¶é‡Œé¢å†™çš„,æŠŠå®ƒå¤åˆ¶ï¼Œç²˜è´´è¿›å»ï¼Œå¹¶ä¿å­˜ã€‚ 4.æ‰§è¡Œå¯¼å…¥å‘½ä»¤12$ cd /Users/chengmei/Desktop/Test$ pod install å¯¼å…¥æˆåŠŸåï¼Œå¦‚ä¸‹æˆªå›¾æ‰€ç¤ºpod installå‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œä¼šçœ‹åˆ°å·¥ç¨‹ç›®å½•ä¸‹å¤šå‡ºCocoaPodsTest.xcworkspaceã€Podfile.lockæ–‡ä»¶å’ŒPodsç›®å½•ã€‚å†çœ‹çœ‹åˆšæ‰æ‰§è¡Œå®Œpod installå‘½ä»¤æ‰“å°å‡ºæ¥çš„å†…å®¹çš„æœ€åä¸€è¡Œï¼š1[!](#) Please close any current Xcode sessions and use `Test.xcworkspace` for this project from now on. æç¤ºæˆ‘ä»¬ä»ç°åœ¨èµ·ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨CocoaPodsTest.xcworkspaceæ–‡ä»¶æ¥å¼€å‘ã€‚ 5.ç¬¬ä¸‰æ–¹åº“æ›´æ–°ä¸æ·»åŠ å½“éœ€è¦æ·»åŠ ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œåªéœ€è¦ç›´æ¥åœ¨Podfileé‡Œé¢æ·»åŠ ç¬¬ä¸‰æ–¹åº“ä¿¡æ¯ï¼Œåœ¨terminalé‡Œé¢å¯¼å…¥æ‰§è¡Œå‘½ä»¤ï¼š12$ cd /Users/chengmei/Desktop/Test$ pod update å³å¯æ·»åŠ å¹¶æ›´æ–°æˆåŠŸã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬CocoaPodsçš„å®‰è£…ä¸ä½¿ç”¨å°±å…¨éƒ¨ç»“æŸï¼Œå¾€åæˆ‘ä»¬åªéœ€åœ¨.xcworkspaceæ–‡ä»¶é‡Œé¢ç¼–å†™å³å¯ã€‚ é‡åˆ°è¿‡çš„å‘ é¦–å…ˆå°±æ˜¯ç³»ç»Ÿå‡çº§æˆ10.11åï¼Œç”±äºè‹¹æœåŠ å¼ºäº†å®‰å…¨ç­–ç•¥ï¼ŒåŸæ¥çš„sudo gem install cocoapodså‘½ä»¤ä¸å†èµ·ä½œç”¨ï¼Œåœ¨10.11ä»¥å‰çš„ç³»ç»Ÿä¸­ä»»ç„¶é€‚ç”¨ã€‚10.11åéœ€è¦é€‚ç”¨å‘½ä»¤sudo gem install -n /usr/local/bin cocoapods è¿™ä¸ªé—®é¢˜æŠ˜è…¾æˆ‘å¥½ä¹…ï¼Œæœ€åå‘ç°æ˜¯åœ¨ios, â€˜7.0â€™è¿™ä¸ªé€—å·åé¢æˆ‘å¤šè¾“å…¥äº†ä¸€ä¸ªç©ºæ ¼ã€‚ 31[!] Invalid Podfile file: undefined local variable or method 'en_US' for #&lt;Pod::Podfile:0x00000102a5d8b0&gt;. Updating CocoaPods might fix the issue. æ­¤é”™è¯¯ä¹Ÿæ˜¯å¸¸è§çš„ï¼ŒåŸå› ï¼šå•å¼•å·æ ¼å¼ï¼Œå¯èƒ½æ˜¯æ‰‹åŠ¨è¾“å…¥å¯¼è‡´è§£å†³åŠæ³•ï¼šå‰å¾€ ç³»ç»Ÿåå¥½è®¾ç½® - é”®ç›˜ - æ–‡æœ¬ - å°†â€œä½¿ç”¨æ™ºèƒ½å¼•å·å’Œç ´æŠ˜å·â€ä¸€é¡¹å–æ¶ˆå‹¾é€‰ - å†å°† Podfile é‡Œé¢çš„å•ï¼ˆåŒï¼‰å¼•å·ä¿®æ”¹ä¸€ä¸‹ã€‚å¦‚æœé‡åˆ°äº†ç¥å¥‡çš„æŠ¥é”™ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ 123$ sudo gem update --system$ sudo gem install cocoapods$ pod setup é‡è£…å§ æ›´å¤š1ã€pod installæé€Ÿæ¯æ¬¡æ‰§è¡Œpod installå’Œpod updateçš„æ—¶å€™ï¼Œcocoapodséƒ½ä¼šé»˜è®¤æ›´æ–°ä¸€æ¬¡specä»“åº“ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒè€—æ—¶çš„æ“ä½œã€‚åœ¨ç¡®è®¤specç‰ˆæœ¬åº“ä¸éœ€è¦æ›´æ–°æ—¶ï¼Œç»™è¿™ä¸¤ä¸ªå‘½ä»¤åŠ ä¸€ä¸ªå‚æ•°è·³è¿‡specç‰ˆæœ¬åº“æ›´æ–°,å¯ä»¥æ˜æ˜¾æé«˜è¿™ä¸¤ä¸ªå‘½ä»¤çš„æ‰§è¡Œé€Ÿåº¦ã€‚12pod install --verbose --no-repo-updatepod update --verbose --no-repo-update 2ã€å…³äºPodfileæ–‡ä»¶ç¼–è¾‘æ—¶ï¼Œç¬¬ä¸‰æ–¹åº“ç‰ˆæœ¬å·çš„å„ç§å†™æ³•123456789pod â€˜AFNetworkingâ€™ //ä¸æ˜¾å¼æŒ‡å®šä¾èµ–åº“ç‰ˆæœ¬ï¼Œè¡¨ç¤ºæ¯æ¬¡éƒ½è·å–æœ€æ–°ç‰ˆæœ¬pod â€˜AFNetworkingâ€™, â€˜2.0â€™ //åªä½¿ç”¨2.0ç‰ˆæœ¬pod â€˜AFNetworkingâ€™, â€˜\\&gt;2.0â€² //ä½¿ç”¨é«˜äº2.0çš„ç‰ˆæœ¬pod â€˜AFNetworkingâ€™, â€˜\\&gt;=2.0â€² //ä½¿ç”¨å¤§äºæˆ–ç­‰äº2.0çš„ç‰ˆæœ¬pod â€˜AFNetworkingâ€™, â€˜\\&lt;2.0â€² //ä½¿ç”¨å°äº2.0çš„ç‰ˆæœ¬pod â€˜AFNetworkingâ€™, â€˜\\&lt;=2.0â€² //ä½¿ç”¨å°äºæˆ–ç­‰äº2.0çš„ç‰ˆæœ¬pod â€˜AFNetworkingâ€™, â€˜&gt;0.1.2â€² //ä½¿ç”¨å¤§äºç­‰äº0.1.2ä½†å°äº0.2çš„ç‰ˆæœ¬ï¼Œç›¸å½“äº&gt;=0.1.2å¹¶ä¸”&lt;0.2.0pod â€˜AFNetworkingâ€™, â€˜&gt;0.1â€² //ä½¿ç”¨å¤§äºç­‰äº0.1ä½†å°äº1.0çš„ç‰ˆæœ¬pod â€˜AFNetworkingâ€™, â€˜&gt;0â€² //é«˜äº0çš„ç‰ˆæœ¬ï¼Œå†™è¿™ä¸ªé™åˆ¶å’Œä»€ä¹ˆéƒ½ä¸å†™æ˜¯ä¸€ä¸ªæ•ˆæœï¼Œéƒ½è¡¨ç¤ºä½¿ç”¨æœ€æ–°ç‰ˆæœ¬","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://www.zhimakaiyuan.com/categories/æŠ€æœ¯/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://www.zhimakaiyuan.com/tags/iOS/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://www.zhimakaiyuan.com/tags/å·¥å…·/"}]},{"title":"2015å¹´ç»ˆå°ç»“","slug":"2015å¹´ç»ˆå°ç»“","date":"2016-01-08T01:53:42.000Z","updated":"2016-12-14T02:47:16.000Z","comments":true,"path":"2016/01/08/2015å¹´ç»ˆå°ç»“/","link":"","permalink":"http://www.zhimakaiyuan.com/2016/01/08/2015å¹´ç»ˆå°ç»“/","excerpt":"2015å¹´å·²è¿‘è¿‡å»ï¼ŒææŒ‡ä¸€ç®—ä»2014å¹´æ¥å…¬å¸å®ä¹ åˆ°æ­£å¼å…¥èŒä¹Ÿå·²ç»ä¸€å¹´å¤šäº†ï¼Œéå¸¸æ„Ÿè°¢å…¬å¸å¯¹æˆ‘çš„åŸ¹å…»å’Œå®ä¹ å¯¼å¸ˆå¯¹æˆ‘çš„æ•™å¯¼ã€‚","text":"2015å¹´å·²è¿‘è¿‡å»ï¼ŒææŒ‡ä¸€ç®—ä»2014å¹´æ¥å…¬å¸å®ä¹ åˆ°æ­£å¼å…¥èŒä¹Ÿå·²ç»ä¸€å¹´å¤šäº†ï¼Œéå¸¸æ„Ÿè°¢å…¬å¸å¯¹æˆ‘çš„åŸ¹å…»å’Œå®ä¹ å¯¼å¸ˆå¯¹æˆ‘çš„æ•™å¯¼ã€‚å·¥ä½œè‡³ä»Šï¼Œä»æœ€å¼€å§‹çš„å°è¯¾æ¡Œï¼Œåˆ°å®‰å¾½å’Œæ•™è‚²ï¼Œæœ€äº‘å—ï¼Œåˆ°ç°åœ¨çš„åŒ—äº¬å’Œæ•™è‚²ï¼Œå¤§å¤§å°å°çš„é¡¹ç›®ä¹Ÿæ¥è§¦äº†äº”å…­ä¸ªã€‚åœ¨è¿™ä¸€å¹´çš„å·¥ä½œæ—¶é—´é‡Œï¼Œä¸ªäººèƒ½åŠ›å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ï¼Œè™½ä¸èƒ½å®Œå…¨ç‹¬å½“ä¸€é¢ä½†ä¹Ÿèƒ½åœ¨å¤§çš„é¡¹ç›®ä¸­æŒ‰ç…§è¦æ±‚åŠæ—¶å®Œæˆå‘æ”¾çš„ä»»åŠ¡ï¼Œå¹¶å³ä½¿å¤„ç†åé¦ˆçš„å„ç§é—®é¢˜å•ã€‚å¸Œæœ›åœ¨æ–°çš„ä¸€å¹´é‡Œä¸ªäººèƒ½åŠ›èƒ½å¤Ÿæ›´è¿›ä¸€æ­¥ï¼Œå¾—åˆ°å†ä¸€æ¬¡çš„æå‡ï¼Œè¿æ¥æ›´åŠ å…·æœ‰æŒ‘æˆ˜æ€§çš„å·¥ä½œã€‚åœ¨è¿™ä¸€å¹´çš„æ—¶é—´é‡Œï¼Œæ¥è§¦æœ€å¤šçš„è¿˜æ˜¯åŒ—äº¬çš„é¡¹ç›®ã€‚è¿™æ˜¯ä¸€é¡¹å¾ˆé”»ç‚¼äººçš„é¡¹ç›®ï¼Œåœ¨é¡¹ç›®é‡Œèƒ½å¤Ÿå­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼ŒæŒæ¡å¾ˆå¤šæ–°çš„æŠ€èƒ½ã€‚å¸Œæœ›åœ¨æ–°çš„ä¸€å¹´ä¸­ï¼Œèƒ½å¤Ÿä¸ºé¡¹ç›®åšå‡ºæ›´å¤§çš„è´¡çŒ®ï¼Œåœ¨ä»»åŠ¡ä¸æ˜¯å¾ˆç´§å¼ çš„æ—¶å€™ï¼Œèƒ½å¤Ÿå­¦ä¹ æ–°çš„æŠ€æœ¯ï¼Œå¾—ä»¥è¿ç”¨åˆ°å·¥ä½œä¸­æ¥ã€‚ #ä¸ªäººå»ºè®®1ã€åœ¨ä»»åŠ¡æ¯”è¾ƒå®½æ¾çš„æ—¶å€™å¤šä¸€äº›æŠ€æœ¯äº¤æµç±»ä¼¼çš„æ´»åŠ¨ï¼Œå¯ä»¥è®©å¤§å®¶äº†è§£å¹¶ç†Ÿæ‚‰æ–°çš„æŠ€æœ¯ï¼Œå¾—ä»¥è¿ç”¨åˆ°å·¥ä½œä¸­æ¥ã€‚2ã€ä½¿ç”¨å›¢é˜Ÿåä½œå·¥å…·ï¼Œæ•´ä¸ªé¡¹ç›®è¿›åº¦å¤§å®¶éƒ½èƒ½çœ‹åˆ°ï¼Œè®©æ¯ä¸ªäººæ›´åŠ åˆç†è§„åˆ’è‡ªå·±çš„å·¥ä½œ","categories":[{"name":"åæ§½","slug":"åæ§½","permalink":"http://www.zhimakaiyuan.com/categories/åæ§½/"}],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://www.zhimakaiyuan.com/tags/éšç¬”/"},{"name":"ç¢ç¢å¿µ","slug":"ç¢ç¢å¿µ","permalink":"http://www.zhimakaiyuan.com/tags/ç¢ç¢å¿µ/"}]},{"title":"å®ç°iOS 9 Task SwitcheråŠ¨ç”»ï¼»è½¬è½½ï¼½","slug":"å®ç°iOS-9-Task-SwitcheråŠ¨ç”»","date":"2015-09-08T07:04:13.000Z","updated":"2016-12-14T02:47:33.000Z","comments":true,"path":"2015/09/08/å®ç°iOS-9-Task-SwitcheråŠ¨ç”»/","link":"","permalink":"http://www.zhimakaiyuan.com/2015/09/08/å®ç°iOS-9-Task-SwitcheråŠ¨ç”»/","excerpt":"æœ¬æ–‡è½¬è½½è‡ªhttp://tech.glowing.com/cn/å¦‚æœ‰ä¾µçŠ¯ï¼Œç«‹é©¬åˆ é™¤åŸæ–‡é“¾æ¥:å®ç°iOS 9 Task SwitcheråŠ¨ç”» ##å‡çº§åˆ°iOS 9ä»¥åï¼Œå‘ç°æ–°çš„task switcherçš„åŠ¨ç”»è›®æœ‰è¶£çš„ï¼Œäºæ˜¯å°±åŠ¨æ‰‹å®ç°äº†ä¸‹ï¼Œæœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï½","text":"æœ¬æ–‡è½¬è½½è‡ªhttp://tech.glowing.com/cn/å¦‚æœ‰ä¾µçŠ¯ï¼Œç«‹é©¬åˆ é™¤åŸæ–‡é“¾æ¥:å®ç°iOS 9 Task SwitcheråŠ¨ç”» ##å‡çº§åˆ°iOS 9ä»¥åï¼Œå‘ç°æ–°çš„task switcherçš„åŠ¨ç”»è›®æœ‰è¶£çš„ï¼Œäºæ˜¯å°±åŠ¨æ‰‹å®ç°äº†ä¸‹ï¼Œæœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï½ æ€è·¯1 é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ¨ªå‘çš„scroll viewï¼Œå¯ä»¥ç”¨UICollectionViewï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªã€‚scroll viewé‡Œæ¯ä¸€é¡µéƒ½æ˜¯ä¸€å¼ cardï¼Œä¸€å±5å¼ card: 123ï½œ |ï½œcard card card card card|ï½œ | 2 å…¶æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨scrollViewDidScrollä¸­åˆ¤æ–­æ¯å¼ cardè·ç¦»ä¸­å¿ƒçš„è·ç¦»ï¼Œæ ¹æ®è¿™ä¸ªå€¼æ¥è°ƒæ•´å®ƒçš„alphaï¼Œscaleä»¥åŠxè½´çš„translationã€‚ alphaï¼šå³è¾¹çš„card alphaéƒ½æ˜¯1ï¼Œå·¦è¾¹çš„è¶Šé å·¦alphaè¶Šå°scaleï¼š ä»å·¦å¾€å³ä¾æ¬¡å˜å¤§translationï¼šé™¤äº†ä¸­é—´çš„cardï¼Œæ‰€æœ‰çš„cardéƒ½ä¼šå³åï¼Œè€Œä¸ºäº†è®©ä¸­é—´cardå¤§éƒ¨åˆ†éƒ½éœ²å‡ºæ¥ï¼Œå³è¾¹çš„cardåç§»éœ€è¦æ¯”å·¦è¾¹å¤§å¼€å·¥ 1. æ¨ªå‘æ»šåŠ¨çš„scroll viewæˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªæ¨ªå‘æ— é™æ»šåŠ¨çš„scroll view, å…·ä½“å¯ä»¥å‚è€ƒ:http://tech.glowing.com/cn/practice-in-uiscrollview/åœ¨scrollViewDidScrollä¸­ï¼Œæˆ‘ä»¬æä¾›ä¸€ä¸ªdelegateæ–¹æ³•ï¼Œå‘Šè¯‰ä½¿ç”¨è€…æ¯ä¸€é¡µè·ç¦»ä¸­å¿ƒçš„ä½ç½®ï¼Œä»¥ä¾¿applyå„ç§transformåˆ°è¿™ä¸ªviewä¸Šï¼Œdelegateæ–¹æ³•å¦‚ä¸‹ï¼š 123@protocol InfiniteScrollViewDelegate \\&lt;NSObject\\&gt;- (void)updateView:(UIView *)view withProgress:(CGFloat)progress scrollDirection:(ScrollDirection)direction;@end è¯´æ˜ä¸€ä¸‹progressçš„å«ä¹‰ï¼Œå¦‚æœä¸€å±æœ‰5ä¸ªvisible viewsçš„è¯ï¼Œé‚£ä¹ˆå®ƒçš„å€¼ä¼šä»ï¼2å˜åŒ–åˆ°2ï¼š 123| ||-2...-1...0...1...2|| | 2. æ ¹æ®æ¯ä¸€é¡µçš„ä½ç½®æ¥è®¾ç½®å®ƒçš„transformé¦–å…ˆæ˜¯alphaï¼Œä¸­å¿ƒå³è¾¹çš„card alphaéƒ½æ˜¯1ï¼Œè€Œå·¦è¾¹çš„ä¼šè¶Šæ¥è¶Šæ·¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š 12345if (progress \\&gt;= 0) view.alpha = 1;&#125; else view.alpha = 1 - fabs(progress) * 0.2;&#125; å…¶æ¬¡æ˜¯scaleï¼Œç”±å·¦å¾€å³ä¾æ¬¡å˜å¤§ï¼š 123CGAffineTransform transform = CGAffineTransformIdentity; CGFloat scale = 1 + (progress) * 0.03; transform = CGAffineTransformScale(transform, scale, scale); æœ€åæ˜¯xè½´çš„translationï¼Œé™¤äº†ä¸­é—´çš„cardï¼Œæ‰€æœ‰çš„cardéƒ½ä¼šå¾€å³åï¼Œè€Œä¸ºäº†è®©ä¸­é—´cardå¤§éƒ¨åˆ†éƒ½éœ²å‡ºæ¥ï¼Œå³è¾¹çš„cardåç§»éœ€è¦æ¯”å·¦è¾¹å¤§ 1234567CGFloat translation = 0; if (progress \\&gt; 0) translation = fabs(progress) * SCREEN_WIDTH / 2.2;&#125; else translation = fabs(progress) * SCREEN_WIDTH / 15;&#125;transform = CGAffineTransformTranslate(transform, translation, 0); å®Œæ•´çš„å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940-(void)updateView:(UIView *)view withProgress:(CGFloat)progress scrollDirection:(ScrollDirection)direction&#123; // adjust z-index of each views NSMutableArray *views = [[self.scrollView allViews] mutableCopy]; [views sortUsingComparator:^NSComparisonResult(UIView *view1, UIView *view2) &#123; return view1.tag &gt; view2.tag; &#125;]; for (UIView *view in views) &#123; [view.superview bringSubviewToFront:view]; &#125;// alphaif (progress &gt;= 0) &#123; view.alpha = 1;&#125; else &#123; view.alpha = 1 - fabs(progress) * 0.2;&#125;CGAffineTransform transform = CGAffineTransformIdentity; // scaleCGFloat scale = 1 + (progress) * 0.03;transform = CGAffineTransformScale(transform, scale, scale);// translationCGFloat translation = 0;if (progress &gt; 0) &#123; translation = fabs(progress) * SCREEN_WIDTH / 2.2;&#125; else&#123; translation = fabs(progress) * SCREEN_WIDTH / 15;&#125;transform = CGAffineTransformTranslate(transform, translation, 0);view.transform = transform;&#125; æœ€åæ˜¯å®Œæ•´çš„demoä»£ç ï¼šhttps://github.com/Glow-Inc/TaskSwitcherDemo","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://www.zhimakaiyuan.com/categories/æŠ€æœ¯/"}],"tags":[{"name":"è½¬è½½","slug":"è½¬è½½","permalink":"http://www.zhimakaiyuan.com/tags/è½¬è½½/"},{"name":"iOS","slug":"iOS","permalink":"http://www.zhimakaiyuan.com/tags/iOS/"}]},{"title":"iOSå¤šçº¿ç¨‹","slug":"iOSå¤šçº¿ç¨‹","date":"2015-08-20T08:55:52.000Z","updated":"2016-12-14T02:48:04.000Z","comments":true,"path":"2015/08/20/iOSå¤šçº¿ç¨‹/","link":"","permalink":"http://www.zhimakaiyuan.com/2015/08/20/iOSå¤šçº¿ç¨‹/","excerpt":"iOSå¤šçº¿ç¨‹åˆ†ä¸ºå››ç§ Pthreads NSThread GCD NSOperation &amp; NSOperationQueue","text":"iOSå¤šçº¿ç¨‹åˆ†ä¸ºå››ç§ Pthreads NSThread GCD NSOperation &amp; NSOperationQueue Pthreads POSIXçº¿ç¨‹ï¼ˆPOSIX threadsï¼‰ï¼Œç®€ç§°Pthreadsï¼Œæ˜¯çº¿ç¨‹çš„POSIXæ ‡å‡†ã€‚è¯¥æ ‡å‡†å®šä¹‰äº†åˆ›å»ºå’Œæ“çºµçº¿ç¨‹çš„ä¸€æ•´å¥—APIã€‚åœ¨ç±»Unixæ“ä½œç³»ç»Ÿï¼ˆUnixã€Linuxã€Mac OS Xç­‰ï¼‰ä¸­ï¼Œéƒ½ä½¿ç”¨Pthreadsä½œä¸ºæ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ã€‚ ç®€å•åœ°è¯´ï¼Œè¿™æ˜¯ä¸€å¥—åœ¨å¾ˆå¤šæ“ä½œç³»ç»Ÿä¸Šéƒ½é€šç”¨çš„å¤šçº¿ç¨‹APIï¼Œæ‰€ä»¥ç§»æ¤æ€§å¾ˆå¼ºï¼ˆç„¶å¹¶åµï¼‰ï¼Œå½“ç„¶åœ¨ iOS ä¸­ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä¸è¿‡è¿™æ˜¯åŸºäºCè¯­è¨€çš„æ¡†æ¶ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒé…¸çˆ½å•¦ï¼æ„Ÿå—ä¸€ä¸‹ï¼š 123456789- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event &#123;pthread_t thread;//åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¹¶è‡ªåŠ¨æ‰§è¡Œpthread_create(&amp;thread, NULL, start, NULL);&#125;void *start(void *data) &#123;NSLog(@&quot;%@&quot;, [NSThread currentThread]);return NULL;&#125; æ‰“å°å¹¶è¾“å‡ºï¼š122015-07-27 23:57:21.689 testThread[10616:2644653] &lt;NSThread: 0x7fbb48d33690&gt;&#123;number = 2, name = (null)&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://www.zhimakaiyuan.com/categories/æŠ€æœ¯/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://www.zhimakaiyuan.com/tags/iOS/"}]},{"title":"NSCFString longValue","slug":"NSCFString-longValue","date":"2015-07-21T09:30:32.000Z","updated":"2016-12-14T02:48:14.000Z","comments":true,"path":"2015/07/21/NSCFString-longValue/","link":"","permalink":"http://www.zhimakaiyuan.com/2015/07/21/NSCFString-longValue/","excerpt":"æ˜¨å¤©åœ¨å†™ä¸€ä¸ªå­—å…¸æ•°æ®çš„æ—¶å€™ï¼Œåœ¨ä¸€ä¸ªå­—å…¸å†…æœ‰18å¯¹é”®å€¼å¯¹","text":"æ˜¨å¤©åœ¨å†™ä¸€ä¸ªå­—å…¸æ•°æ®çš„æ—¶å€™ï¼Œåœ¨ä¸€ä¸ªå­—å…¸å†…æœ‰18å¯¹é”®å€¼å¯¹å…¶ä¸­æœ‰ä¸€ä¸ªidçš„å€¼ä¸ºlongå‹çš„,æˆ‘å°±è§‰å¾—æ—¢ç„¶ä½ çš„å€¼æ˜¯longå‹çš„ï¼Œé‚£æˆ‘è¦å–ä½ çš„å€¼ä¸æ˜¯è½»è½»æ¾æ¾ä¹ˆ,äºæ˜¯1long appID = [info[@&quot;id&quot;] longValue]; ç„¶åå½“ç„¶æŠ¥é”™äº†ï¼Œ12-[__NSCFString longValue]: unrecognized selector sent to instance 0x9bf8e10Terminating app due to uncaught exception &apos;NSInvalidArgumentException&apos;, reason: &apos;-[__NSCFString longValue]: unrecognized selector sent to instance 0x9bf8e10&apos; ç™¾æ€ä¸å¾—å…¶è§£ï¼Œä¸å¯¹å•Šï¼Œæˆ‘ä¹‹å‰ç”¨è¿˜æ˜¯å¯ä»¥çš„ï¼Œæ€ä¹ˆå°±æŠ¥é”™äº†å‘¢ã€‚æœ€ååœ¨stackoverflowä¸Šé¢æ‰¾åˆ°äº†ç­”æ¡ˆã€‚åŸæ¥ï¼Œ@â€œidâ€æ‰€å¯¹åº”å¾—å€¼ï¼Œæ˜¯ä¸€ä¸ªidç±»å‹çš„å€¼ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå°†ä»–å¼ºåˆ¶è½¬æ¢æˆNSStringç±»å‹çš„å€¼ï¼Œç„¶åå†å°†NSStringç±»å‹çš„å€¼è½¬åŒ–æˆlongå‹çš„ã€‚ 12NSString *strForId = dic[@&quot;id&quot;];long appID = [strForId longLongValue]; æˆ–è€…ç›´æ¥å¼ºåˆ¶è½¬æ¢1long appID ï¼ ï¼ˆlong)ï¼»dic[@\"id\"] longValueï¼½; æœç„¶å†ä¹Ÿä¸æŠ¥é”™äº†ï½","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"http://www.zhimakaiyuan.com/categories/å…¶ä»–/"}],"tags":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"http://www.zhimakaiyuan.com/tags/å…¶ä»–/"}]},{"title":"æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ","slug":"æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ","date":"2015-07-10T09:13:45.000Z","updated":"2016-12-14T02:47:47.000Z","comments":true,"path":"2015/07/10/æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« /","link":"","permalink":"http://www.zhimakaiyuan.com/2015/07/10/æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« /","excerpt":"","text":"#Hello Worldï¼å¥½å§ï¼Œæš‚ä¸”å«å®ƒæˆ‘çš„ç¬¬ä¸€ç¯‡å§ï¼Œè™½è¯´èµ·æ­¥æ™šï¼Œå¯æ˜¯è´¨é‡ä¹Ÿä¸é«˜å•Šã€‚ã€‚ã€‚çœŸä¸æ˜¯ä¸€ä¸ªç”¨å¿ƒçš„åšä¸»å•Š","categories":[{"name":"çºªå¿µ","slug":"çºªå¿µ","permalink":"http://www.zhimakaiyuan.com/categories/çºªå¿µ/"}],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://www.zhimakaiyuan.com/tags/éšç¬”/"},{"name":"ç¢ç¢å¿µ","slug":"ç¢ç¢å¿µ","permalink":"http://www.zhimakaiyuan.com/tags/ç¢ç¢å¿µ/"}]}]}